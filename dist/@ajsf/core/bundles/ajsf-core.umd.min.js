!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/forms"),require("@angular/core"),require("lodash/cloneDeep"),require("lodash/isEqual"),require("rxjs"),require("ajv"),require("ajv/lib/refs/json-schema-draft-06.json"),require("rxjs/operators"),require("lodash/filter"),require("lodash/map"),require("lodash/uniqueId")):"function"==typeof define&&define.amd?define("@ajsf/core",["exports","@angular/common","@angular/forms","@angular/core","lodash/cloneDeep","lodash/isEqual","rxjs","ajv","ajv/lib/refs/json-schema-draft-06.json","rxjs/operators","lodash/filter","lodash/map","lodash/uniqueId"],t):t(((e=e||self).ajsf=e.ajsf||{},e.ajsf.core={}),e.ng.common,e.ng.forms,e.ng.core,e["lodash-es"],e["lodash-es"],e.rxjs,e.ajv,e.jsonDraft6,e.rxjs.operators,e["lodash-es"],e["lodash-es"],e["lodash-es"])}(this,(function(e,t,r,n,o,i,a,s,l,u,p,d,c){"use strict";o=o&&o.hasOwnProperty("default")?o.default:o,i=i&&i.hasOwnProperty("default")?i.default:i,s=s&&s.hasOwnProperty("default")?s.default:s,l=l&&l.hasOwnProperty("default")?l.default:l,p=p&&p.hasOwnProperty("default")?p.default:p,d=d&&d.hasOwnProperty("default")?d.default:d,c=c&&c.hasOwnProperty("default")?c.default:c;
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var f=function(){return(f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function h(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function g(e,t){var r,n;void 0===t&&(t={});var i=t.draft||null,a=t.changed||!1;if("object"!=typeof e)return e;if("function"==typeof e.map)return v(e.map((function(e){return g(e,{changed:a,draft:i})})));var s=f({},e),l=["array","boolean","integer","null","number","object","string"];if("string"==typeof s.$schema&&/http\:\/\/json\-schema\.org\/draft\-0\d\/schema\#/.test(s.$schema)&&(i=s.$schema[30]),s.contentEncoding&&(s.media={binaryEncoding:s.contentEncoding},delete s.contentEncoding,a=!0),"object"==typeof s.extends&&(s.allOf="function"==typeof s.extends.map?s.extends.map((function(e){return g(e,{changed:a,draft:i})})):[g(s.extends,{changed:a,draft:i})],delete s.extends,a=!0),s.disallow&&("string"==typeof s.disallow?s.not={type:s.disallow}:"function"==typeof s.disallow.map&&(s.not={anyOf:s.disallow.map((function(e){return"object"==typeof e?e:{type:e}}))}),delete s.disallow,a=!0),"object"==typeof s.dependencies&&Object.keys(s.dependencies).some((function(e){return"string"==typeof s.dependencies[e]}))&&(s.dependencies=f({},s.dependencies),Object.keys(s.dependencies).filter((function(e){return"string"==typeof s.dependencies[e]})).forEach((function(e){return s.dependencies[e]=[s.dependencies[e]]})),a=!0),"number"==typeof s.maxDecimal&&(s.multipleOf=1/Math.pow(10,s.maxDecimal),delete s.divisibleBy,a=!0,i&&2!==i||(i=1)),"number"==typeof s.divisibleBy&&(s.multipleOf=s.divisibleBy,delete s.divisibleBy,a=!0),"number"==typeof s.minimum&&!1===s.minimumCanEqual?(s.exclusiveMinimum=s.minimum,delete s.minimum,a=!0,i||(i=2)):"boolean"==typeof s.minimumCanEqual&&(delete s.minimumCanEqual,a=!0,i||(i=2)),"number"==typeof s.minimum&&!0===s.exclusiveMinimum?(s.exclusiveMinimum=s.minimum,delete s.minimum,a=!0):"boolean"==typeof s.exclusiveMinimum&&(delete s.exclusiveMinimum,a=!0),"number"==typeof s.maximum&&!1===s.maximumCanEqual?(s.exclusiveMaximum=s.maximum,delete s.maximum,a=!0,i||(i=2)):"boolean"==typeof s.maximumCanEqual&&(delete s.maximumCanEqual,a=!0,i||(i=2)),"number"==typeof s.maximum&&!0===s.exclusiveMaximum?(s.exclusiveMaximum=s.maximum,delete s.maximum,a=!0):"boolean"==typeof s.exclusiveMaximum&&(delete s.exclusiveMaximum,a=!0),"object"==typeof s.properties){var u=f({},s.properties),p=Array.isArray(s.required)?new Set(s.required):new Set;if((1===i||2===i||Object.keys(u).some((function(e){return!0===u[e].optional})))&&(Object.keys(u).filter((function(e){return!0!==u[e].optional})).forEach((function(e){return p.add(e)})),a=!0,i||(i=2)),Object.keys(u).some((function(e){return!0===u[e].required}))&&(Object.keys(u).filter((function(e){return!0===u[e].required})).forEach((function(e){return p.add(e)})),a=!0),p.size&&(s.required=Array.from(p)),Object.keys(u).some((function(e){return u[e].requires}))){var d="object"==typeof s.dependencies?f({},s.dependencies):{};Object.keys(u).filter((function(e){return u[e].requires})).forEach((function(e){return d[e]="string"==typeof u[e].requires?[u[e].requires]:u[e].requires})),s.dependencies=d,a=!0,i||(i=2)}s.properties=u}if("boolean"==typeof s.optional&&(delete s.optional,a=!0,i||(i=2)),s.requires&&delete s.requires,"boolean"==typeof s.required&&delete s.required,"string"!=typeof s.id||s.$id||("#"===s.id.slice(-1)&&(s.id=s.id.slice(0,-1)),s.$id=s.id+"-CONVERTED-TO-DRAFT-06#",delete s.id,a=!0),!s.type||("function"==typeof s.type.every?s.type.every((function(e){return l.includes(e)})):l.includes(s.type))||(a=!0),"string"==typeof s.$schema&&/http\:\/\/json\-schema\.org\/draft\-0[1-4]\/schema\#/.test(s.$schema))s.$schema="http://json-schema.org/draft-06/schema#",a=!0;else if(a&&"string"==typeof s.$schema){var c="Converted to draft 6 from "+s.$schema;"string"==typeof s.description&&s.description.length?s.description+="\n"+c:s.description=c,delete s.$schema}if(s.type&&("function"==typeof s.type.every?!s.type.every((function(e){return l.includes(e)})):!l.includes(s.type)))if(1===s.type.length&&(s.type=s.type[0]),"string"==typeof s.type)"any"===s.type?s.type=l:delete s.type;else if("object"==typeof s.type){if("function"==typeof s.type.every)if(s.type.every((function(e){return"string"==typeof e})))s.type=s.type.some((function(e){return"any"===e}))?s.type=l:s.type.filter((function(e){return l.includes(e)}));else if(s.type.length>1){var m=["additionalItems","items","maxItems","minItems","uniqueItems","contains"],y=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"],b=["maxProperties","minProperties","required","additionalProperties","properties","patternProperties","dependencies","propertyNames"],x=["maxLength","minLength","pattern","format"],I={array:v(y,b,x),integer:v(m,b,x),number:v(m,b,x),object:v(m,y,x),string:v(m,y,b),all:v(m,y,b,x)},F=[],C=function(e){var t="string"==typeof e?{type:e}:f({},e);Object.keys(s).filter((function(e){return!t.hasOwnProperty(e)&&!v(I[t.type]||I.all,["type","default"]).includes(e)})).forEach((function(e){return t[e]=s[e]})),F.push(t)};try{for(var j=h(s.type),w=j.next();!w.done;w=j.next()){C(w.value)}}catch(e){r={error:e}}finally{try{w&&!w.done&&(n=j.return)&&n.call(j)}finally{if(r)throw r.error}}s=s.hasOwnProperty("default")?{anyOf:F,default:s.default}:{anyOf:F}}else{var O=s.type;delete s.type,Object.assign(s,O)}}else delete s.type;return Object.keys(s).filter((function(e){return"object"==typeof s[e]})).forEach((function(e){if(["definitions","dependencies","properties","patternProperties"].includes(e)&&"function"!=typeof s[e].map){var t={};Object.keys(s[e]).forEach((function(r){return t[r]=g(s[e][r],{changed:a,draft:i})})),s[e]=t}else["items","additionalItems","additionalProperties","allOf","anyOf","oneOf","not"].includes(e)?s[e]=g(s[e],{changed:a,draft:i}):s[e]=o(s[e])})),s}function b(e,t,r){return void 0===r&&(r=!1),t.map((function(t){return t(e,r)}))}function x(e,t,r){return void 0===r&&(r=!1),t.map((function(t){return t(e,r)}))}function I(){for(var e,t,r,n,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a={};try{for(var s=h(o),l=s.next();!l.done;l=s.next()){var u=l.value;if(N(u))try{for(var p=h(Object.keys(u)),d=p.next();!d.done;d=p.next()){var c=d.value,m=u[c],f=a[c];a[c]=C(f)?"not"===c&&k(f,"strict")&&k(m,"strict")?J(f,m):"object"===E(f)&&"object"===E(m)?I(f,m):m:m}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return a}function F(e){var t=I.apply(void 0,v(e));return w(t)?null:t}function C(e){return null!=e}function j(e){return null!=e&&""!==e}function w(e){return M(e)?!e.length:N(e)?!Object.keys(e).length:null==e||""===e}function O(e){return"string"==typeof e}function D(e,t){return void 0===t&&(t=!1),(!t||"number"==typeof e)&&(!isNaN(e)&&e!==e/0)}function P(e,t){return void 0===t&&(t=!1),(!t||"number"==typeof e)&&(!isNaN(e)&&e!==e/0&&e%1==0)}function k(e,t){return void 0===t&&(t=null),"strict"===t?!0===e||!1===e:!0===t?!0===e||1===e||"true"===e||"1"===e:!1===t?!1===e||0===e||"false"===e||"0"===e:!0===e||1===e||"true"===e||"1"===e||!1===e||0===e||"false"===e||"0"===e}function N(e){return null!==e&&"object"==typeof e}function M(e){return Array.isArray(e)}function S(e){return!!e&&"[object Date]"===Object.prototype.toString.call(e)}function V(e){return!!e&&"[object Map]"===Object.prototype.toString.call(e)}function L(e){return!!e&&"[object Set]"===Object.prototype.toString.call(e)}function E(e,t){return void 0===t&&(t=!1),C(e)?M(e)?"array":N(e)?"object":k(e,"strict")?"boolean":P(e,t)?"integer":D(e,t)?"number":O(e)||!t&&S(e)?"string":null:"null"}function A(e,t){switch(t){case"string":return O(e)||S(e);case"number":return D(e);case"integer":return P(e);case"boolean":return k(e);case"null":return!j(e);default:return console.error('isType error: "'+t+'" is not a recognized type.'),null}}function T(e){return O(e)||D(e)||k(e,"strict")||null===e}function q(e,t,r){if(void 0===r&&(r=!0),!C(e))return null;if(O(t)&&(t=[t]),r&&_("integer",t)){if(P(e,"strict"))return e;if(P(e))return parseInt(e,10)}if(_("number",t)||!r&&_("integer",t)){if(D(e,"strict"))return e;if(D(e))return parseFloat(e)}if(_("string",t)){if(O(e))return e;if(S(e))return e.toISOString().slice(0,10);if(D(e))return e.toString()}if(S(e)&&(_("integer",t)||_("number",t)))return e.getTime();if(_("boolean",t)){if(k(e,!0))return!0;if(k(e,!1))return!1}return null}function R(e,t){if(M(t)||(t=[t]),t.includes("null")&&!j(e))return null;if(t.includes("boolean")&&!k(e,"strict"))return e;if(t.includes("integer")&&null!==(r=q(e,"integer")))return+r;if(t.includes("number")&&null!==(r=q(e,"number")))return+r;if((O(e)||D(e,"strict"))&&t.includes("string"))return q(e,"string");if(t.includes("boolean")&&k(e))return q(e,"boolean");if(t.includes("string")){if(null===e)return"";var r;if(null!==(r=q(e,"string")))return r}if(t.includes("number")||t.includes("integer")){if(!0===e)return 1;if(!1===e||null===e||""===e)return 0}if(t.includes("number")&&(r=parseFloat(e)))return r;if(t.includes("integer")&&(r=parseInt(e,10)))return r;return t.includes("boolean")?!!e:!t.includes("number")&&!t.includes("integer")||t.includes("null")?void 0:0}function $(e){return!!e&&"function"==typeof e.then}function z(e){return!!e&&"function"==typeof e.subscribe}function W(e){var t=$(e)?a.from(e):e;return z(t)?t:(console.error("toObservable error: Expected validator to return Promise or Observable."),new a.Observable)}function _(e,t,r){return void 0===r&&(r=!1),!(!C(e)||!M(t))&&(M(e)?e[r?"every":"some"]((function(e){return t.includes(e)})):t.includes(e))}function J(e,t){return!!e&&!t||!e&&!!t}function B(e,t){return void 0===t&&(t=!1),"object"!=typeof e||null===e?e:V(e)?new Map(e):L(e)?new Set(e):M(e)?v(e):N(e)?f({},e):(t&&console.error("copy error: Object to copy must be a JavaScript object or value."),e)}function H(e,t,r,n,o){var i,a;if(void 0===r&&(r=!1),void 0===n&&(n=e),void 0===o&&(o=!1),!w(e)){if((N(e)||M(e))&&"function"==typeof t)try{for(var s=h(Object.keys(e)),l=s.next();!l.done;l=s.next()){var u=l.value,p=e[u];"bottom-up"===r&&(N(p)||M(p))&&H(p,t,r,n),t(p,u,e,n),"top-down"===r&&(N(p)||M(p))&&H(p,t,r,n)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}o&&("function"!=typeof t&&(console.error("forEach error: Iterator must be a function."),console.error("function",t)),N(e)||M(e)||(console.error("forEach error: Input object must be an object or array."),console.error("object",e)))}}function G(e,t,r){var n,o;if(void 0===r&&(r=!1),j(e)){if((N(e)||M(e))&&"function"!=typeof e){var i=M(e)?[]:{};try{for(var a=h(Object.keys(e)),s=a.next();!s.done;s=a.next()){var l=s.value;i[l]=t(e[l],l,e)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i}r&&("function"!=typeof t&&(console.error("forEachCopy error: Iterator must be a function."),console.error("function",t)),N(e)||M(e)||(console.error("forEachCopy error: Input object must be an object or array."),console.error("object",e)))}}function U(e,t){if(!(e&&["number","string","symbol"].includes(typeof t)&&(N(e)||M(e)||V(e)||L(e))))return!1;if(V(e)||L(e))return e.has(t);if("number"==typeof t){if(M(e))return e[t];t+=""}return e.hasOwnProperty(t)}var Z={EQUALS:0,NOT_EQUALS:1,NOT_AN_EXPRESSION:2};function K(e){return e===Z.EQUALS}function Y(e){return e===Z.NOT_EQUALS}function Q(e,t,r,n,o){var i,a;if(void 0===r&&(r=[]),void 0===n&&(n=function(e){return e}),void 0===o&&(o=function(e){return e}),!N(t))return e;N(e)||(e={});try{for(var s=h(Object.keys(t)),l=s.next();!l.done;l=s.next()){var u=l.value;!_(u,r)&&C(t[u])&&(e[n(u)]=o(t[u]))}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return e}function X(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=[];try{for(var i=h(r),a=i.next();!a.done;a=i.next()){var s=a.value;o.includes(s)||o.push(s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return o}function ee(){for(var e,t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=null,i=function(e){if(O(e)&&(e=[e]),!(o=null===o?v(e):o.filter((function(t){return e.includes(t)}))).length)return{value:[]}};try{for(var a=h(r),s=a.next();!s.done;s=a.next()){var l=s.value,u=i(l);if("object"==typeof u)return u.value}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return o}function te(e){return e&&re(e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," "))}function re(e,t){if(!O(e))return e;var r=["a","an","and","as","at","but","by","en","for","if","in","nor","of","on","or","per","the","to","v","v.","vs","vs.","via"];O(t)&&(t=t.split("|")),M(t)&&(r=r.concat(t));var n=r.map((function(e){return e.toLowerCase()})),o=e===e.toUpperCase()||e===e.toLowerCase(),i="";return(e=e.trim()).replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,(function(t,a){if(o||-1===t.slice(1).search(/[A-Z]|\../)){var s=void 0,l=r[n.indexOf(t.toLowerCase())];return s=l?l===l.toLowerCase()&&(0===a||a+t.length===e.length||":"===i||-1!==e[a-1].search(/[^\s-]/)||"-"!==e[a-1]&&"-"===e[a+t.length])?l[0].toUpperCase()+l.slice(1):l:o?-1!==t.slice(1).search(/\../)?t.toLowerCase():t[0].toUpperCase()+t.slice(1).toLowerCase():t[0].toUpperCase()+t.slice(1),i=t.slice(-1),s}return t}))}Z[Z.EQUALS]="EQUALS",Z[Z.NOT_EQUALS]="NOT_EQUALS",Z[Z.NOT_AN_EXPRESSION]="NOT_AN_EXPRESSION";var ne=function(){function e(){this.widgets={},this.stylesheets=[],this.scripts=[]}return e.decorators=[{type:n.Injectable}],e}();var oe=function(){function e(){}return e.get=function(t,r,n,o,i,a){var s,l;if(void 0===n&&(n=0),void 0===o&&(o=null),void 0===i&&(i=!1),void 0===a&&(a=!1),null===t)return!i&&void 0;var u=this.parse(r,a);if("object"==typeof t&&null!==u){var p=t;if(n>=u.length||o<=-u.length)return t;n<=-u.length&&(n=0),(!C(o)||o>=u.length)&&(o=u.length),u=u.slice(n,o);try{for(var d=h(u),c=d.next();!c.done;c=d.next()){var m=c.value;if("-"===m&&M(p)&&p.length&&(m=p.length-1),V(p)&&p.has(m))p=p.get(m);else if("object"==typeof p&&null!==p&&U(p,m))p=p[m];else{var f=e.evaluateExpression(p,m);if(!f.passed)return this.logErrors(a,m,r,t),!i&&void 0;p=f.key?p[f.key]:p}}}catch(e){s={error:e}}finally{try{c&&!c.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}return!!i||p}return a&&null===u&&console.error("get error: Invalid JSON Pointer: "+r),a&&"object"!=typeof t&&(console.error("get error: Invalid object:"),console.error(t)),!i&&void 0},e.logErrors=function(e,t,r,n){e&&(console.error('get error: "'+t+'" key not found in object.'),console.error(r),console.error(n))},e.evaluateExpression=function(e,t){var r={passed:!1,key:t},n=this.parseKeysAndExpression(t,e);if(!n)return r;var o=this.doOwnCheckResult(e,n);if(o)return o;var i,a="'"===(i=n.keyAndValue[1]).charAt(0)&&"'"===i.charAt(i.length-1)?i.replace("'","").replace("'",""):i,s=this.performExpressionOnValue(n,a,e);return s||r},e.performExpressionOnValue=function(e,t,r){var n=r[e.keyAndValue[0]];return this.doComparisonByExpressionType(e.expressionType,n,t)?{passed:!0,key:e.keyAndValue[0]}:null},e.doComparisonByExpressionType=function(e,t,r){return K(e)?t===r:!!Y(e)&&t!==r},e.doOwnCheckResult=function(e,t){var r=null;return U(e,t.keyAndValue[0])||(K(t.expressionType)&&(r={passed:!1,key:null}),Y(t.expressionType)&&(r={passed:!0,key:null})),r},e.parseKeysAndExpression=function(e,t){if(this.keyOrSubObjEmpty(e,t))return null;var r,n=-1!==(r=e.toString()).indexOf("==")?Z.EQUALS:-1!==r.toString().indexOf("!=")?Z.NOT_EQUALS:Z.NOT_AN_EXPRESSION;if(function(e){return e===Z.NOT_AN_EXPRESSION}(n))return null;var o=function(e,t){return K(e)?t.split("==",2):Y(e)?t.split("!=",2):null}(n,e);return o&&o[0]&&o[1]?{expressionType:n,keyAndValue:o}:null},e.keyOrSubObjEmpty=function(e,t){return!e||!t},e.getCopy=function(e,t,r,n,o,i){void 0===r&&(r=0),void 0===n&&(n=null),void 0===o&&(o=!1),void 0===i&&(i=!1);var a=this.get(e,t,r,n,o,i);return this.forEachDeepCopy(a)},e.getFirst=function(e,t,r){var n,o,i,a;if(void 0===t&&(t=null),void 0===r&&(r=!1),!w(e)){if(M(e)){try{for(var s=h(e),l=s.next();!l.done;l=s.next()){var u=l.value;if(!w(u)){if(!(M(u)&&u.length>=2))return void console.error("getFirst error: Input not in correct format.\nShould be: [ [ object1, pointer1 ], [ object 2, pointer2 ], etc... ]");if(w(u[0])||w(u[1]))continue;if(c=r?this.getCopy(u[0],u[1]):this.get(u[0],u[1]))return c}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return t}if(V(e)){try{for(var p=h(e),d=p.next();!d.done;d=p.next()){var c,m=y(d.value,2),f=m[0],v=m[1];if(null!==f&&this.isJsonPointer(v))if(c=r?this.getCopy(f,v):this.get(f,v))return c}}catch(e){i={error:e}}finally{try{d&&!d.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}return t}return console.error("getFirst error: Input not in correct format.\nShould be: [ [ object1, pointer1 ], [ object 2, pointer2 ], etc... ]"),t}},e.getFirstCopy=function(e,t){return void 0===t&&(t=null),this.getFirst(e,t,!0)},e.set=function(e,t,r,n){void 0===n&&(n=!1);var o=this.parse(t);if(null!==o&&o.length){for(var i=e,a=0;a<o.length-1;++a){var s=o[a];"-"===s&&M(i)&&(s=i.length),V(i)&&i.has(s)?i=i.get(s):(U(i,s)||(i[s]=o[a+1].match(/^(\d+|-)$/)?[]:{}),i=i[s])}var l=o[o.length-1];return M(i)&&"-"===l?i.push(r):n&&M(i)&&!isNaN(+l)?i.splice(l,0,r):V(i)?i.set(l,r):i[l]=r,e}return console.error("set error: Invalid JSON Pointer: "+t),e},e.setCopy=function(e,t,r,n){void 0===n&&(n=!1);var o=this.parse(t);if(null!==o){for(var i=B(e),a=i,s=0;s<o.length-1;++s){var l=o[s];"-"===l&&M(a)&&(l=a.length),V(a)&&a.has(l)?(a.set(l,B(a.get(l))),a=a.get(l)):(U(a,l)||(a[l]=o[s+1].match(/^(\d+|-)$/)?[]:{}),a[l]=B(a[l]),a=a[l])}var u=o[o.length-1];return M(a)&&"-"===u?a.push(r):n&&M(a)&&!isNaN(+u)?a.splice(u,0,r):V(a)?a.set(u,r):a[u]=r,i}return console.error("setCopy error: Invalid JSON Pointer: "+t),e},e.insert=function(e,t,r){return this.set(e,t,r,!0)},e.insertCopy=function(e,t,r){return this.setCopy(e,t,r,!0)},e.remove=function(e,t){var r=this.parse(t);if(null!==r&&r.length){var n=r.pop(),o=this.get(e,r);return M(o)?("-"===n&&(n=o.length-1),o.splice(n,1)):N(o)&&delete o[n],e}return console.error("remove error: Invalid JSON Pointer: "+t),e},e.has=function(e,t){return this.get(e,t,0,null,!0)},e.dict=function(e){var t={};return this.forEachDeep(e,(function(e,r){"object"!=typeof e&&(t[r]=e)})),t},e.forEachDeep=function(e,t,r,n,o){var i,a;if(void 0===t&&(t=function(e){return e}),void 0===r&&(r=!1),void 0===n&&(n=""),void 0===o&&(o=e),"function"==typeof t){if(r||t(e,n,o),N(e)||M(e))try{for(var s=h(Object.keys(e)),l=s.next();!l.done;l=s.next()){var u=l.value,p=n+"/"+this.escape(u);this.forEachDeep(e[u],t,r,p,o)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}r&&t(e,n,o)}else console.error("forEachDeep error: Iterator is not a function:",t)},e.forEachDeepCopy=function(e,t,r,n,o){var i,a;if(void 0===t&&(t=function(e){return e}),void 0===r&&(r=!1),void 0===n&&(n=""),void 0===o&&(o=e),"function"!=typeof t)return console.error("forEachDeepCopy error: Iterator is not a function:",t),null;if(N(e)||M(e)){var s=M(e)?v(e):f({},e);r||(s=t(s,n,o));try{for(var l=h(Object.keys(s)),u=l.next();!u.done;u=l.next()){var p=u.value,d=n+"/"+this.escape(p);s[p]=this.forEachDeepCopy(s[p],t,r,d,o)}}catch(e){i={error:e}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return r&&(s=t(s,n,o)),s}return t(e,n,o)},e.escape=function(e){return e.toString().replace(/~/g,"~0").replace(/\//g,"~1")},e.unescape=function(e){return e.toString().replace(/~1/g,"/").replace(/~0/g,"~")},e.parse=function(e,t){return void 0===t&&(t=!1),this.isJsonPointer(e)?M(e)?e:"string"==typeof e?("#"===e[0]&&(e=e.slice(1)),""===e||"/"===e?[]:e.slice(1).split("/").map(this.unescape)):void 0:(t&&console.error("parse error: Invalid JSON Pointer: "+e),null)},e.compile=function(e,t,r){var n=this;return void 0===t&&(t=""),void 0===r&&(r=!1),"#"===e?"":this.isJsonPointer(e)?M(e)?0===e.length?"":"/"+e.map((function(e){return""===e?t:n.escape(e)})).join("/"):"string"==typeof e?("#"===e[0]&&(e=e.slice(1)),e):void 0:(r&&console.error("compile error: Invalid JSON Pointer: "+e),null)},e.toKey=function(e,t){void 0===t&&(t=!1);var r=this.parse(e,t);return null===r?null:r.length?r[r.length-1]:""},e.isJsonPointer=function(e){if(M(e))return e.every((function(e){return"string"==typeof e}));if(O(e)){if(""===e||"#"===e)return!0;if("/"===e[0]||"#/"===e.slice(0,2))return!/(~[^01]|~$)/g.test(e)}return!1},e.isSubPointer=function(e,t,r,n){if(void 0===r&&(r=!1),void 0===n&&(n=!1),this.isJsonPointer(e)&&this.isJsonPointer(t))return(e=this.compile(e,"",n))===(t=this.compile(t,"",n))?r:e+"/"===t.slice(0,e.length+1);if(n){var o="";this.isJsonPointer(e)||(o+=" 1: "+e),this.isJsonPointer(t)||(o+=" 2: "+t),console.error("isSubPointer error: Invalid JSON Pointer "+o)}},e.toIndexedPointer=function(e,t,r){var n,o;if(void 0===r&&(r=null),this.isJsonPointer(e)&&M(t)){var i=this.compile(e);if(V(r)){var a=0;return i.replace(/\/\-(?=\/|$)/g,(function(e,n){return r.has(i.slice(0,n))?"/"+t[a++]:e}))}try{for(var s=h(t),l=s.next();!l.done;l=s.next()){var u=l.value;i=i.replace("/-","/"+u)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return i}this.isJsonPointer(e)||console.error("toIndexedPointer error: Invalid JSON Pointer: "+e),M(t)||console.error("toIndexedPointer error: Invalid indexArray: "+t)},e.toGenericPointer=function(e,t){if(void 0===t&&(t=new Map),this.isJsonPointer(e)&&V(t)){for(var r=this.parse(e),n=1;n<r.length;n++){var o=this.compile(r.slice(0,n));t.has(o)&&t.get(o)<=+r[n]&&(r[n]="-")}return this.compile(r)}this.isJsonPointer(e)||console.error("toGenericPointer error: invalid JSON Pointer: "+e),V(t)||console.error("toGenericPointer error: invalid arrayMap: "+t)},e.toControlPointer=function(e,t,r){var n,o;void 0===r&&(r=!1);var i=this.parse(e),a=[],s=t;if(null!==i){try{for(var l=h(i),u=l.next();!u.done;u=l.next()){var p=u.value;if(U(s,"controls")&&(a.push("controls"),s=s.controls),M(s)&&"-"===p)a.push((s.length-1).toString()),s=s[s.length-1];else if(U(s,p))a.push(p),s=s[p];else{if(r)return console.error('toControlPointer error: Unable to find "'+p+'" item in FormGroup.'),console.error(e),void console.error(t);a.push(p),s={controls:{}}}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return this.compile(a)}console.error("toControlPointer error: Invalid JSON Pointer: "+e)},e.toSchemaPointer=function(e,t){if(this.isJsonPointer(e)&&"object"==typeof t){var r=this.parse(e);if(!r.length)return"";var n=r.shift();if("object"===t.type||t.properties||t.additionalProperties){if((t.properties||{})[n])return"/properties/"+this.escape(n)+this.toSchemaPointer(r,t.properties[n]);if(t.additionalProperties)return"/additionalProperties"+this.toSchemaPointer(r,t.additionalProperties)}if(("array"===t.type||t.items)&&(D(n)||"-"===n||""===n)){var o="-"===n||""===n?0:+n;if(M(t.items)){if(o<t.items.length)return"/items/"+o+this.toSchemaPointer(r,t.items[o]);if(t.additionalItems)return"/additionalItems"+this.toSchemaPointer(r,t.additionalItems)}else{if(N(t.items))return"/items"+this.toSchemaPointer(r,t.items);if(N(t.additionalItems))return"/additionalItems"+this.toSchemaPointer(r,t.additionalItems)}}return console.error("toSchemaPointer error: Data pointer "+e+" not compatible with schema "+t),null}return this.isJsonPointer(e)||console.error("toSchemaPointer error: Invalid JSON Pointer: "+e),"object"!=typeof t&&console.error("toSchemaPointer error: Invalid JSON Schema: "+t),null},e.toDataPointer=function(e,t,r){if(void 0===r&&(r=!1),this.isJsonPointer(e)&&"object"==typeof t&&this.has(t,e)){var n=this.parse(e);if(!n.length)return"";var o=n.shift();if("properties"===o||"items"===o&&M(t.items)){var i,a=n.shift();return null===(i=this.toDataPointer(n,t[o][a]))?null:"/"+a+i}if("additionalItems"===o||"items"===o&&N(t.items))return null===(i=this.toDataPointer(n,t[o]))?null:"/-"+i;if(["allOf","anyOf","oneOf"].includes(o)){a=n.shift();return this.toDataPointer(n,t[o][a])}return"not"===o?this.toDataPointer(n,t[o]):(["contains","definitions","dependencies","additionalItems","additionalProperties","patternProperties","propertyNames"].includes(o)&&r&&console.error("toDataPointer error: Ambiguous location"),"")}return r&&(this.isJsonPointer(e)||console.error("toDataPointer error: Invalid JSON Pointer: "+e),"object"!=typeof t&&console.error("toDataPointer error: Invalid JSON Schema: "+t),"object"!=typeof t&&console.error("toDataPointer error: Pointer "+e+" invalid for Schema: "+t)),null},e.parseObjectPath=function(e){if(M(e))return e;if(this.isJsonPointer(e))return this.parse(e);if("string"==typeof e){for(var t=0,r=[];t<e.length;){var n=e.indexOf(".",t),o=e.indexOf("[",t);if(-1===n&&-1===o)r.push(e.slice(t)),t=e.length;else if(-1!==n&&(n<o||-1===o))r.push(e.slice(t,n)),t=n+1;else{o>t&&(r.push(e.slice(t,o)),t=o);var i=e.charAt(o+1);if('"'===i||"'"===i){for(var a=e.indexOf(i+"]",o);-1!==a&&"\\"===e.charAt(a-1);)a=e.indexOf(i+"]",a+2);-1===a&&(a=e.length),r.push(e.slice(t+2,a).replace(new RegExp("\\"+i,"g"),i)),t=a+2}else{-1===(a=e.indexOf("]",o))&&(a=e.length),r.push(e.slice(t+1,a)),t=a+1}"."===e.charAt(t)&&t++}}return r}console.error("parseObjectPath error: Input object path must be a string.")},e.decorators=[{type:n.Injectable}],e}(),ie={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d(?::[0-5]\d)?(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,uri:/^(?:[a-z][a-z0-9+-.]*)(?::|\/)\/?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,color:/^\s*(#(?:[\da-f]{3}){1,2}|rgb\((?:\d{1,3},\s*){2}\d{1,3}\)|rgba\((?:\d{1,3},\s*){3}\d*\.?\d+\)|hsl\(\d{1,3}(?:,\s*\d{1,3}%){2}\)|hsla\(\d{1,3}(?:,\s*\d{1,3}%){2},\s*\d*\.?\d+\))\s*$/gi,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$|^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,regex:function(e){if(/[^\\]\\Z/.test(e))return!1;try{return!0}catch(e){return!1}}},ae=function(){function e(){}return e.required=function(t){switch(void 0===t&&(t=!0),t){case!0:return function(e,t){return void 0===t&&(t=!1),t?null:j(e.value)?null:{required:!0}};case!1:return e.nullValidator;default:return j(t.value)?null:{required:!0}}},e.type=function(t){return j(t)?function(e,r){if(void 0===r&&(r=!1),w(e.value))return null;var n=e.value;return J(M(t)?t.some((function(e){return A(n,e)})):A(n,t),r)?null:{type:{requiredType:t,currentValue:n}}}:e.nullValidator},e.enum=function(t){return M(t)?function(e,r){if(void 0===r&&(r=!1),w(e.value))return null;var n=e.value,o=function(e,t){return e===t||D(e)&&+t==+e||k(e,"strict")&&q(t,"boolean")===e||null===e&&!j(t)||i(e,t)};return J(M(n)?n.every((function(e){return t.some((function(t){return o(t,e)}))})):t.some((function(e){return o(e,n)})),r)?null:{enum:{allowedValues:t,currentValue:n}}}:e.nullValidator},e.const=function(t){return j(t)?function(e,r){if(void 0===r&&(r=!1),w(e.value))return null;var n,o,i=e.value;return J((n=t)===(o=i)||D(n)&&+o==+n||k(n,"strict")&&q(o,"boolean")===n||null===n&&!j(o),r)?null:{const:{requiredValue:t,currentValue:i}}}:e.nullValidator},e.minLength=function(t){return j(t)?function(e,r){if(void 0===r&&(r=!1),w(e.value))return null;var n=O(e.value)?e.value.length:0;return J(n>=t,r)?null:{minLength:{minimumLength:t,currentLength:n}}}:e.nullValidator},e.maxLength=function(t){return j(t)?function(e,r){void 0===r&&(r=!1);var n=O(e.value)?e.value.length:0;return J(n<=t,r)?null:{maxLength:{maximumLength:t,currentLength:n}}}:e.nullValidator},e.pattern=function(t,r){return void 0===r&&(r=!1),j(t)?function(e,n){if(void 0===n&&(n=!1),w(e.value))return null;var o,i;"string"==typeof t?(i=r?"^"+t+"$":t,o=new RegExp(i)):(i=t.toString(),o=t);var a=e.value;return J(!!O(a)&&o.test(a),n)?null:{pattern:{requiredPattern:i,currentValue:a}}}:e.nullValidator},e.format=function(t){return j(t)?function(e,r){if(void 0===r&&(r=!1),w(e.value))return null;var n,o=e.value;if(O(o)){var i=ie[t];"object"==typeof i?n=i.test(o):"function"==typeof i?n=i(o):(console.error('format validator error: "'+t+'" is not a recognized format.'),n=!0)}else n=["date","time","date-time"].includes(t)&&"[object Date]"===Object.prototype.toString.call(o);return J(n,r)?null:{format:{requiredFormat:t,currentValue:o}}}:e.nullValidator},e.minimum=function(t){return j(t)?function(e,r){if(void 0===r&&(r=!1),w(e.value))return null;var n=e.value;return J(!D(n)||n>=t,r)?null:{minimum:{minimumValue:t,currentValue:n}}}:e.nullValidator},e.exclusiveMinimum=function(t){return j(t)?function(e,r){if(void 0===r&&(r=!1),w(e.value))return null;var n=e.value;return J(!D(n)||+n<t,r)?null:{exclusiveMinimum:{exclusiveMinimumValue:t,currentValue:n}}}:e.nullValidator},e.maximum=function(t){return j(t)?function(e,r){if(void 0===r&&(r=!1),w(e.value))return null;var n=e.value;return J(!D(n)||+n<=t,r)?null:{maximum:{maximumValue:t,currentValue:n}}}:e.nullValidator},e.exclusiveMaximum=function(t){return j(t)?function(e,r){if(void 0===r&&(r=!1),w(e.value))return null;var n=e.value;return J(!D(n)||+n<t,r)?null:{exclusiveMaximum:{exclusiveMaximumValue:t,currentValue:n}}}:e.nullValidator},e.multipleOf=function(t){return j(t)?function(e,r){if(void 0===r&&(r=!1),w(e.value))return null;var n=e.value;return J(D(n)&&n%t==0,r)?null:{multipleOf:{multipleOfValue:t,currentValue:n}}}:e.nullValidator},e.minProperties=function(t){return j(t)?function(e,r){if(void 0===r&&(r=!1),w(e.value))return null;var n=Object.keys(e.value).length||0;return J(n>=t,r)?null:{minProperties:{minimumProperties:t,currentProperties:n}}}:e.nullValidator},e.maxProperties=function(t){return j(t)?function(e,r){void 0===r&&(r=!1);var n=Object.keys(e.value).length||0;return J(n<=t,r)?null:{maxProperties:{maximumProperties:t,currentProperties:n}}}:e.nullValidator},e.dependencies=function(t){return"object"!==E(t)||w(t)?e.nullValidator:function(r,n){if(void 0===n&&(n=!1),w(r.value))return null;var o=I(G(t,(function(o,i){var a,s,l;if(!j(r.value[i]))return null;var u,p={},d={};"array"===E(t[i])?u=t[i]:"object"===E(t[i])&&(u=t[i].required||[],d=t[i].properties||{});try{for(var c=h(u),m=c.next();!m.done;m=c.next()){var f=m.value;J(!j(r.value[f]),n)&&(p[f]={required:!0})}}catch(e){a={error:e}}finally{try{m&&!m.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return p=I(p,G(d,(function(t,n){var o,i=I(G(t,(function(o,i){var a=null;if("maximum"===o||"minimum"===o){var s=!!t["exclusiveM"+o.slice(1)];a=e[o](i,s)}else"function"==typeof e[o]&&(a=e[o](i));return C(a)?a(r.value[n]):null})));return w(i)?null:((o={})[n]=i,o)}))),w(p)?null:((l={})[i]=p,l)})));return w(o)?null:o}},e.minItems=function(t){return j(t)?function(e,r){if(void 0===r&&(r=!1),w(e.value))return null;var n=M(e.value)?e.value.length:0;return J(n>=t,r)?null:{minItems:{minimumItems:t,currentItems:n}}}:e.nullValidator},e.maxItems=function(t){return j(t)?function(e,r){void 0===r&&(r=!1);var n=M(e.value)?e.value.length:0;return J(n<=t,r)?null:{maxItems:{maximumItems:t,currentItems:n}}}:e.nullValidator},e.uniqueItems=function(t){return void 0===t&&(t=!0),t?function(e,t){if(void 0===t&&(t=!1),w(e.value))return null;for(var r=e.value.slice().sort(),n=[],o=1;o<r.length;o++)r[o-1]===r[o]&&n.includes(r[o])&&n.push(r[o]);return J(!n.length,t)?null:{uniqueItems:{duplicateItems:n}}}:e.nullValidator},e.contains=function(t){return void 0===t&&(t=!0),t?function(e,r){if(void 0===r&&(r=!1),w(e.value)||!M(e.value))return null;var n=e.value;return J(!0,r)?null:{contains:{requiredItem:t,currentItems:n}}}:e.nullValidator},e.nullValidator=function(e){return null},e.composeAnyOf=function(e){if(!e)return null;var t=e.filter(C);return 0===t.length?null:function(r,n){void 0===n&&(n=!1);var o=b(r,t,n).filter(C);return J(e.length>o.length,n)?null:I.apply(void 0,v(o,[{anyOf:!n}]))}},e.composeOneOf=function(e){if(!e)return null;var t=e.filter(C);return 0===t.length?null:function(r,n){void 0===n&&(n=!1);var o=b(r,t);if(J(1===e.length-o.filter(C).length,n))return null;var i=b(r,t,n);return I.apply(void 0,v(o,i,[{oneOf:!n}]))}},e.composeAllOf=function(e){if(!e)return null;var t=e.filter(C);return 0===t.length?null:function(e,r){void 0===r&&(r=!1);var n=F(b(e,t,r));return J(null===n,r)?null:I(n,{allOf:!r})}},e.composeNot=function(e){return e?function(t,r){if(void 0===r&&(r=!1),w(t.value))return null;var n=e(t,!r);return J(null===n,r)?null:I(n,{not:!r})}:null},e.compose=function(e){if(!e)return null;var t=e.filter(C);return 0===t.length?null:function(e,r){return void 0===r&&(r=!1),F(b(e,t,r))}},e.composeAsync=function(e){if(!e)return null;var t=e.filter(C);return 0===t.length?null:function(e){var r=x(e,t).map(W);return u.map.call(a.forkJoin(r),F)}},e.min=function(t){return j(t)?function(e){if(w(e.value)||w(t))return null;var r=parseFloat(e.value),n=e.value;return isNaN(r)||r>=t?null:{min:{min:t,actual:n}}}:e.nullValidator},e.max=function(t){return j(t)?function(e){if(w(e.value)||w(t))return null;var r=parseFloat(e.value),n=e.value;return isNaN(r)||r<=t?null:{max:{max:t,actual:n}}}:e.nullValidator},e.requiredTrue=function(t){return t?!0===t.value?null:{required:!0}:e.nullValidator},e.email=function(t){if(!t)return e.nullValidator;return/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/.test(t.value)?null:{email:!0}},e}();function se(){for(var e,t,r,n,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if((o=o.filter((function(e){return!w(e)}))).some((function(e){return!N(e)})))return null;var s={};try{for(var l=h(o),u=l.next();!u.done;u=l.next()){var p=u.value,d=function(e){var t,r,n,a,l,u,d,c,m,y,g=s[e],b=p[e];if(!U(s,e)||i(g,b))s[e]=b;else switch(e){case"allOf":if(!M(g)||!M(b))return{value:{allOf:v(o)}};s.allOf=se.apply(void 0,v(g,b));break;case"additionalItems":case"additionalProperties":case"contains":case"propertyNames":if(N(g)&&N(b))s[e]=se(g,b);else{if("additionalProperties"!==e||!1!==g&&!1!==b)return{value:{allOf:v(o)}};s.combinedSchema=!1}break;case"anyOf":case"oneOf":case"enum":if(!M(g)||!M(b))return{value:{allOf:v(o)}};if(s[e]=g.filter((function(e){return b.findIndex((function(t){return i(e,t)}))>-1})),!s[e].length)return{value:{allOf:v(o)}};break;case"definitions":if(!N(g)||!N(b))return{value:{allOf:v(o)}};var x=f({},g);try{for(var I=h(Object.keys(b)),F=I.next();!F.done;F=I.next()){if(U(x,R=F.value)&&!i(x[R],b[R]))return{value:{allOf:v(o)}};x[R]=b[R]}}catch(e){t={error:e}}finally{try{F&&!F.done&&(r=I.return)&&r.call(I)}finally{if(t)throw t.error}}s.definitions=x;break;case"dependencies":if(!N(g)||!N(b))return{value:{allOf:v(o)}};x=f({},g);try{for(var C=h(Object.keys(b)),j=C.next();!j.done;j=C.next()){if(!U(x,R=j.value)||i(x[R],b[R]))x[R]=b[R];else if(M(b[R])&&M(x[R]))x[R]=X.apply(void 0,v(x[R],b[R]));else{if(!M(b[R])&&!N(b[R])||!M(x[R])&&!N(x[R]))return{value:{allOf:v(o)}};var w=M(s.required)?s.required:[],P=M(x[R])?{required:X.apply(void 0,v(w,[x[R]]))}:x[R],k=M(b[R])?{required:X.apply(void 0,v(w,[b[R]]))}:b[R];x[R]=se(P,k)}}}catch(e){n={error:e}}finally{try{j&&!j.done&&(a=C.return)&&a.call(C)}finally{if(n)throw n.error}}s.dependencies=x;break;case"items":if(M(g)&&M(b)){if(s.items=g.filter((function(e){return b.findIndex((function(t){return i(e,t)}))>-1})),!s.items.length)return{value:{allOf:v(o)}}}else if(N(g)&&N(b))s.items=se(g,b);else if(M(g)&&N(b))s.items=g.map((function(e){return se(e,b)}));else{if(!N(g)||!M(b))return{value:{allOf:v(o)}};s.items=b.map((function(e){return se(e,g)}))}break;case"multipleOf":if(!D(g)||!D(b))return{value:{allOf:v(o)}};var S=function(e,t){return t?S(t,e%t):e};s.multipleOf=(m=g)*(y=b)/S(m,y);break;case"maximum":case"exclusiveMaximum":case"maxLength":case"maxItems":case"maxProperties":if(!D(g)||!D(b))return{value:{allOf:v(o)}};s[e]=Math.min(g,b);break;case"minimum":case"exclusiveMinimum":case"minLength":case"minItems":case"minProperties":if(!D(g)||!D(b))return{value:{allOf:v(o)}};s[e]=Math.max(g,b);break;case"not":if(!N(g)||!N(b))return{value:{allOf:v(o)}};var V=[g,b].reduce((function(e,t){return M(t.anyOf)&&1===Object.keys(t).length?v(e,t.anyOf):v(e,[t])}),[]);s.not={anyOf:V};break;case"patternProperties":if(!N(g)||!N(b))return{value:{allOf:v(o)}};x=f({},g);try{for(var L=h(Object.keys(b)),E=L.next();!E.done;E=L.next()){if(!U(x,R=E.value)||i(x[R],b[R]))x[R]=b[R];else{if(!N(b[R])||!N(x[R]))return{value:{allOf:v(o)}};x[R]=se(x[R],b[R])}}}catch(e){l={error:e}}finally{try{E&&!E.done&&(u=L.return)&&u.call(L)}finally{if(l)throw l.error}}s.patternProperties=x;break;case"properties":if(!N(g)||!N(b))return{value:{allOf:v(o)}};var A=f({},g);U(b,"additionalProperties")&&Object.keys(g).filter((function(e){return!Object.keys(b).includes(e)})).forEach((function(e){!1===b.additionalProperties?delete A[e]:N(b.additionalProperties)&&(A[e]=se(A[e],b.additionalProperties))}));try{for(var T=h(Object.keys(b)),q=T.next();!q.done;q=T.next()){var R=q.value;if(i(A[R],b[R])||!U(A,R)&&!U(A,"additionalProperties"))A[R]=b[R];else if(!U(A,R)&&U(A,"additionalProperties"))N(A.additionalProperties)&&(A[R]=se(A.additionalProperties,b[R]));else{if(!N(b[R])||!N(A[R]))return{value:{allOf:v(o)}};A[R]=se(A[R],b[R])}}}catch(e){d={error:e}}finally{try{q&&!q.done&&(c=T.return)&&c.call(T)}finally{if(d)throw d.error}}s.properties=A;break;case"required":if(M(g)&&M(b))s.required=X.apply(void 0,v(g,b));else{if("boolean"!=typeof b||"boolean"!=typeof g)return{value:{allOf:v(o)}};s.required=!!g||!!b}break;case"$schema":case"$id":case"id":break;case"title":case"description":case"$comment":s[e]=b;break;case"type":if(!M(b)&&!O(b)||!M(g)&&!O(g))return{value:{allOf:v(o)}};var $=ee(g,b);if(!$.length)return{value:{allOf:v(o)}};s.type=$.length>1?$:$[0];break;case"uniqueItems":s.uniqueItems=!!g||!!b;break;default:return{value:{allOf:v(o)}}}};try{for(var c=h(Object.keys(p)),m=c.next();!m.done;m=c.next()){var y=m.value,g=d(y);if("object"==typeof g)return g.value}}catch(e){r={error:e}}finally{try{m&&!m.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}return s}function le(e){}function ue(e,t,r){var n,o;void 0===t&&(t=!1),void 0===r&&(r=!0);var i={},a=function(e){var t=E(e,"strict");return{integer:"number",null:"string"}[t]||t},s=function(e){return ue(e,t,!1)};if(r&&(i.$schema="http://json-schema.org/draft-06/schema#"),i.type=a(e),"object"===i.type){i.properties={},t&&(i.required=[]);try{for(var l=h(Object.keys(e)),u=l.next();!u.done;u=l.next()){var p=u.value;i.properties[p]=s(e[p]),t&&i.required.push(p)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}}else"array"===i.type&&(i.items=e.map(s),1===new Set(e.map(a)).size&&(i.items=i.items.reduce((function(e,t){return f({},e,t)}),{})),t&&(i.minItems=1));return i}function pe(e,t,r){void 0===r&&(r="schema");var n=oe.parse(t);if(null===n)return console.error("getFromSchema error: Invalid JSON Pointer: "+t),null;var o=e,i=[],a=n.length;"parent"===r.slice(0,6)&&n.length--;for(var s=0;s<a;++s){var l=n[s],u=!1;if("object"!=typeof o)return console.error('getFromSchema error: Unable to find "'+l+'" key in schema.'),console.error(e),console.error(t),null;if("array"!==o.type||isNaN(l)&&"-"!==l?"object"===o.type&&(N(o.properties)&&U(o.properties,l)?(u=!0,o=o.properties[l],i.push("properties",l)):N(o.additionalProperties)?(u=!0,o=o.additionalProperties,i.push("additionalProperties")):!1!==o.additionalProperties&&(u=!0,o={},i.push("additionalProperties"))):(U(o,"items")&&(N(o.items)?(u=!0,o=o.items,i.push("items")):M(o.items)&&!isNaN(l)&&o.items.length>=+l&&(u=!0,o=o.items[+l],i.push("items",l))),!u&&N(o.additionalItems)?(u=!0,o=o.additionalItems,i.push("additionalItems")):!1!==o.additionalItems&&(u=!0,o={},i.push("additionalItems"))),!u)return console.error('getFromSchema error: Unable to find "'+l+'" item in schema.'),console.error(e),void console.error(t)}return"Pointer"===r.slice(-7)?i:o}function de(e,t,r){if(void 0===r&&(r=new Map),!e)return"";var n=oe.toGenericPointer(oe.compile(e),r);if(-1===n.indexOf("/"))return n;for(var o=!0;o;)o=!1,t.forEach((function(e,t){if(oe.isSubPointer(e,t))for(;oe.isSubPointer(t,n,!0);)n=oe.toGenericPointer(e+n.slice(t.length),r),o=!0}));return n}function ce(e,t){void 0===t&&(t=null);var r=oe.getFirst([[e,"/x-schema-form/type"],[e,"/x-schema-form/widget/component"],[e,"/x-schema-form/widget"],[e,"/widget/component"],[e,"/widget"]]);if(O(r))return me(r,e,t);var n=e.type;if(n){if(M(n)&&(n=_("object",n)&&U(e,"properties")?"object":_("array",n)&&U(e,"items")?"array":_("array",n)&&U(e,"additionalItems")?"array":_("string",n)?"string":_("number",n)?"number":_("integer",n)?"integer":_("boolean",n)?"boolean":"unknown"),"boolean"===n)return"checkbox";if("object"===n){if(U(e,"properties")||U(e,"additionalProperties"))return"section";if(U(e,"$ref"))return"$ref"}if("array"===n)return U(oe.getFirst([[e,"/items"],[e,"/additionalItems"]])||{},"enum")&&1!==e.maxItems?me("checkboxes",e,t):"array";if("null"===n)return"none";if(oe.has(t,"/options/titleMap")||U(e,"enum")||ye(e,null,!0))return"select";if("number"===n||"integer"===n)return("integer"===n||U(e,"multipleOf"))&&U(e,"maximum")&&U(e,"minimum")?"range":n;if("string"===n)return{color:"color",date:"date","date-time":"datetime-local",email:"email",uri:"url"}[e.format]||"text"}return U(e,"$ref")?"$ref":M(e.oneOf)||M(e.anyOf)?"one-of":(console.error("getInputType error: Unable to determine input type for "+n),console.error("schema",e),t&&console.error("layoutNode",t),"none")}function me(e,t,r){return void 0===r&&(r=null),!O(e)||"checkbox"!==e.slice(0,8)&&"radio"!==e.slice(0,5)?e:!0===oe.getFirst([[r,"/inline"],[r,"/options/inline"],[t,"/inline"],[t,"/x-schema-form/inline"],[t,"/x-schema-form/options/inline"],[t,"/x-schema-form/widget/inline"],[t,"/x-schema-form/widget/component/inline"],[t,"/x-schema-form/widget/component/options/inline"],[t,"/widget/inline"],[t,"/widget/component/inline"],[t,"/widget/component/options/inline"]])?"radio"===e.slice(0,5)?"radios-inline":"checkboxes-inline":e}function fe(e,t){if(!N(e))return console.error("isInputRequired error: Input schema must be an object."),!1;var r=oe.parse(t);if(M(r)){if(!r.length)return!0===e.required;var n=r.pop(),o=r[r.length-1];["properties","additionalProperties","patternProperties","items","additionalItems"].includes(o)&&r.pop();var i=oe.get(e,r)||{};if(M(i.required))return i.required.includes(n);if("array"===i.type)return U(i,"minItems")&&D(n)&&+i.minItems>+n}return!1}function he(e,t,r){if(N(e)&&N(e.options)){var n={},o=function(e){return"ui:"===e.slice(0,3).toLowerCase()?e.slice(3):e};if(Q(n,r.formOptions.defautWidgetOptions,[],o),[[oe.get(t,"/ui:widget/options"),[]],[oe.get(t,"/ui:widget"),[]],[t,["additionalProperties","additionalItems","properties","items","required","type","x-schema-form","$ref"]],[oe.get(t,"/x-schema-form/options"),[]],[oe.get(t,"/x-schema-form"),["items","options"]],[e,["_id","$ref","arrayItem","arrayItemType","dataPointer","dataType","items","key","name","options","recursiveReference","type","widget"]],[e.options,[]]].forEach((function(e){var t=y(e,2),r=t[0],i=t[1];return Q(n,r,i,o)})),!U(n,"titleMap")){var i=null;(i=ye(t,n.flatList))&&(n.titleMap=i),U(n,"titleMap")||U(n,"enum")||!U(t,"items")||(oe.has(t,"/items/titleMap")?n.titleMap=t.items.titleMap:oe.has(t,"/items/enum")?(n.enum=t.items.enum,!U(n,"enumNames")&&oe.has(t,"/items/enumNames")&&(n.enumNames=t.items.enumNames)):oe.has(t,"/items/oneOf")&&(i=ye(t.items,n.flatList))&&(n.titleMap=i))}"integer"!==t.type||j(n.multipleOf)||(n.multipleOf=1),oe.has(n,"/autocomplete/source")?n.typeahead=n.autocomplete:oe.has(n,"/tagsinput/source")?n.typeahead=n.tagsinput:oe.has(n,"/tagsinput/typeahead/source")&&(n.typeahead=n.tagsinput.typeahead),e.options=n}}function ye(e,t,r){void 0===e&&(e={}),void 0===t&&(t=null),void 0===r&&(r=!1);var n=null,o=e.oneOf||e.anyOf||null;if(M(o)&&o.every((function(e){return e.title}))){if(o.every((function(e){return M(e.enum)&&1===e.enum.length}))){if(r)return!0;n=o.map((function(e){return{name:e.title,value:e.enum[0]}}))}else if(o.every((function(e){return e.const}))){if(r)return!0;n=o.map((function(e){return{name:e.title,value:e.const}}))}if(!1!==t&&(n||[]).filter((function(e){return((e||{}).name||"").indexOf(": ")})).length>1){var i=n.map((function(e){var t=y(e.name.split(/: (.+)/),2),r=t[0],n=t[1];return r&&n?f({},e,{group:r,name:n}):e}));(!0===t||i.some((function(e,t){return t&&U(e,"group")&&e.group===i[t-1].group})))&&(n=i)}}return!r&&n}function ve(e){if(!N(e))return null;var t={};if(U(e,"type"))switch(e.type){case"string":H(["pattern","format","minLength","maxLength"],(function(r){U(e,r)&&(t[r]=[e[r]])}));break;case"number":case"integer":H(["Minimum","Maximum"],(function(r){var n="exclusive"+r,o=r.toLowerCase();if(U(e,o)){var i=U(e,n)&&!0===e[n];t[o]=[e[o],i]}})),H(["multipleOf","type"],(function(r){U(e,r)&&(t[r]=[e[r]])}));break;case"object":H(["minProperties","maxProperties","dependencies"],(function(r){U(e,r)&&(t[r]=[e[r]])}));break;case"array":H(["minItems","maxItems","uniqueItems"],(function(r){U(e,r)&&(t[r]=[e[r]])}))}return U(e,"enum")&&(t.enum=[e.enum]),t}function ge(e,t,r,n,o){if(N(e)){var i=new Set,a=new Set,s=new Map,l=new Map,u={};oe.forEachDeep(e,(function(e,t){if(U(e,"$ref")&&O(e.$ref)){var r=oe.compile(e.$ref);i.add(r),a.add(t+"~~"+r),s.set(t,r)}})),i.forEach((function(t){return u[t]=be(e,t)}));for(var p=!0;p;)p=!1,Array.from(s).forEach((function(e){var t=y(e,2),r=t[0],n=t[1];return Array.from(s).filter((function(e){var t=y(e,2),o=t[0],i=t[1];return oe.isSubPointer(n,o,!0)&&!oe.isSubPointer(i,n,!0)&&!a.has(r+o.slice(n.length)+"~~"+i)})).forEach((function(e){var t=y(e,2),o=t[0],i=t[1];a.add(r+o.slice(n.length)+"~~"+i),p=!0}))}));Array.from(a).map((function(e){return e.split("~~")})).filter((function(e){var t=y(e,2),r=t[0],n=t[1];return oe.isSubPointer(n,r)})).forEach((function(e){var t=y(e,2),r=t[0],n=t[1];return l.set(r,n)})),Array.from(s).filter((function(e){var t=y(e,2),r=t[0];t[1];return Array.from(l.keys()).every((function(e){return!oe.isSubPointer(r,e,!0)}))})).forEach((function(e){var t=y(e,2),r=t[0],n=t[1];return Array.from(l).filter((function(e){var t=y(e,2),o=t[0];t[1];return!l.has(r+o.slice(n.length))&&oe.isSubPointer(n,o,!0)&&!oe.isSubPointer(n,r,!0)})).forEach((function(e){var t=y(e,2),o=t[0],i=t[1];return l.set(r+o.slice(n.length),r+i.slice(n.length))}))}));var d=f({},e);return delete d.definitions,d=be(d,"",u,l),oe.forEachDeep(d,(function(e,i){if(O(e.$ref)){var a=oe.compile(e.$ref);oe.isSubPointer(a,i,!0)||(a=de(i,l),oe.set(d,i,{$ref:"#"+a})),U(t,"refPointer")||(t[a]=a.length?be(d,a,t,l):d),r.has(i)||r.set(i,a);var s=oe.toDataPointer(i,d);if(!n.has(s)){var u=oe.toDataPointer(a,d);n.set(s,u)}}if("array"===e.type&&(U(e,"items")||U(e,"additionalItems"))){var p=oe.toDataPointer(i,d);if(!o.has(p)){var c=M(e.items)?e.items.length:0;o.set(p,c)}}}),!0),d}console.error("resolveSchemaReferences error: schema must be an object.")}function be(e,t,r,n,i){if(void 0===r&&(r=null),void 0===n&&(n=null),void 0===i&&(i=[]),!r||!n)return oe.getCopy(e,t);"string"!=typeof t&&(t=oe.compile(t)),i=v(i,[t]);var a=null;if(""===t)a=o(e);else{var s=de(t,n);s!==t&&(i=v(i,[s])),a=oe.getFirstCopy([[r,[s]],[e,t],[e,s]])}return oe.forEachDeepCopy(a,(function(t,o){if(N(t)){if(O(t.$ref)){var a=oe.compile(t.$ref);if(a.length&&i.every((function(e){return!oe.isSubPointer(a,e,!0)}))){var s=be(e,a,r,n,i);if(1===Object.keys(t).length)return s;var l=f({},t);return delete l.$ref,se(s,l)}}if(M(t.allOf))return xe(t);if("array"===t.type&&M(t.required))return Ie(t)}return t}),!0,t)}function xe(e){if(!N(e)||!M(e.allOf))return e;var t=se.apply(void 0,v(e.allOf));if(Object.keys(e).length>1){var r=f({},e);delete r.allOf,t=se(t,r)}return t}function Ie(e){if("array"===e.type&&M(e.required)){var t=U(e.items,"properties")?"items":U(e.additionalItems,"properties")?"additionalItems":null;t&&!U(e[t],"required")&&(U(e[t],"additionalProperties")||e.required.every((function(r){return U(e[t].properties,r)})))&&((e=o(e))[t].required=e.required,delete e.required)}return e}function Fe(e,t,r,n,i,a){void 0===t&&(t=null),void 0===r&&(r=!0),void 0===n&&(n=""),void 0===i&&(i=""),void 0===a&&(a="");var s=oe.get(e.schema,n);r?!C(t)&&(!0===e.formOptions.setSchemaDefaults||"auto"===e.formOptions.setSchemaDefaults&&w(e.formValues))&&(t=oe.get(e.schema,n+"/default")):t=null;var l=oe.get(s,"/type"),u=(U(s,"properties")||U(s,"additionalProperties"))&&"object"===l?"FormGroup":(U(s,"items")||U(s,"additionalItems"))&&"array"===l?"FormArray":!l&&U(s,"$ref")?"$ref":"FormControl",p=de(i,e.dataRecursiveRefMap,e.arrayMap);e.dataMap.has(p)||e.dataMap.set(p,new Map);var d,c=e.dataMap.get(p);c.has("schemaType")||(c.set("schemaPointer",n),c.set("schemaType",s.type),s.format&&(c.set("schemaFormat",s.format),s.type||c.set("schemaType","string")),u&&(c.set("templatePointer",a),c.set("templateType",u)));var m=ve(s);switch(u){case"FormGroup":if(d={},U(s,"ui:order")||U(s,"properties")){var f=s["ui:order"]||Object.keys(s.properties);if(f.includes("*")&&!U(s.properties,"*"))for(var h=Object.keys(s.properties).filter((function(e){return!f.includes(e)})),y=f.length-1;y>=0;y--)"*"===f[y]&&f.splice.apply(f,v([y,1],h));f.filter((function(e){return U(s.properties,e)||U(s,"additionalProperties")})).forEach((function(o){return d[o]=Fe(e,oe.get(t,[o]),r,n+(U(s.properties,o)?"/properties/"+o:"/additionalProperties"),i+"/"+o,a+"/controls/"+o)})),e.formOptions.fieldsRequired=je(s,d)}return{controlType:u,controls:d,validators:m};case"FormArray":d=[];var g=Math.max(s.minItems||0,c.get("minItems")||0),b=Math.min(s.maxItems||1e3,c.get("maxItems")||1e3),x=null;if(M(s.items)){var I=c.get("tupleItems")||(M(s.items)?Math.min(s.items.length,b):0);for(y=0;y<I;y++)if(y<g)d.push(Fe(e,M(t)?t[y]:t,r,n+"/items/"+y,i+"/"+y,a+"/controls/"+y));else{var F=de(n+"/items/"+y,e.schemaRecursiveRefMap),j=(O=de(p+"/"+y,e.dataRecursiveRefMap,e.arrayMap))!==p+"/"+y;U(e.templateRefLibrary,O)||(e.templateRefLibrary[O]=null,e.templateRefLibrary[O]=Fe(e,null,r,F,O,a+"/controls/"+y)),d.push(M(t)?Fe(e,t[y],r,n+"/items/"+y,i+"/"+y,a+"/controls/"+y):j?null:o(e.templateRefLibrary[O]))}s.items.length<b&&N(s.additionalItems)&&(x=n+"/additionalItems")}else x=n+"/items";if(x){var O;F=de(x,e.schemaRecursiveRefMap),j=(O=de(p+"/-",e.dataRecursiveRefMap,e.arrayMap))!==p+"/-";U(e.templateRefLibrary,O)||(e.templateRefLibrary[O]=null,e.templateRefLibrary[O]=Fe(e,null,r,F,O,a+"/controls/-"));var D=c;if(!j||U(m,"required")){var P=Math.min(Math.max(j?0:D.get("tupleItems")+D.get("listItems")||0,M(t)?t.length:0),b);for(y=d.length;y<P;y++)d.push(M(t)?Fe(e,t[y],r,F,i+"/-",a+"/controls/-"):j?null:o(e.templateRefLibrary[O]))}}return{controlType:u,controls:d,validators:m};case"$ref":var k=oe.compile(s.$ref),S=de(oe.toDataPointer(k,s),e.dataRecursiveRefMap,e.arrayMap);if(S&&!U(e.templateRefLibrary,S)){e.templateRefLibrary[S]=null;var V=Fe(e,r,r,k);V?e.templateRefLibrary[S]=V:delete e.templateRefLibrary[S]}return null;case"FormControl":return{controlType:u,value:{value:r&&T(t)?t:null,disabled:c.get("disabled")||!1},validators:m};default:return null}}function Ce(e){if(U(e,"controlType"))switch(e.controlType){case"FormGroup":var t={};return H(e.controls,(function(e,r){var n=Ce(e);n&&(t[r]=n)})),new r.FormGroup(t,null);case"FormArray":return new r.FormArray(p(d(e.controls,(function(e){return Ce(e)}))),null);case"FormControl":return new r.FormControl(e.value,[])}return null}function je(e,t){var r=!1;if(U(e,"required")&&!w(e.required)){r=!0;var n=M(e.required)?e.required:[e.required];n=H(n,(function(e){return oe.set(t,"/"+e+"/validators/required",[])}))}return r}function we(e,t,r,n,o,i){if(void 0===o&&(o=!1),void 0===i&&(i=!1),null===e||"object"!=typeof e)return e;var a=M(e)?[]:{};return oe.forEachDeep(e,(function(e,s){if(o&&M(e))oe.set(a,s,[]);else if(o&&N(e)&&!S(e))oe.set(a,s,{});else{var l=oe.has(t,[s,"schemaType"])?s:de(s,r,n);if(oe.has(t,[l,"schemaType"])){var u=t.get(l).get("schemaType");if("null"===u)oe.set(a,s,null);else if((j(e)||o)&&_(u,["string","integer","number","boolean"])){var p=i||null===e&&o?R(e,u):q(e,u);(C(p)||o)&&oe.set(a,s,p)}else"object"!==u||o||(t.get(l).get("required")||[]).forEach((function(e){var r=t.get(l+"/"+e).get("schemaType");"array"===r?oe.set(a,s+"/"+e,[]):"object"===r&&oe.set(a,s+"/"+e,{})}));"date-time"===t.get(l).get("schemaFormat")&&(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?$/i.test(e)?oe.set(a,s,e+"Z"):/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d$/i.test(e)?oe.set(a,s,e+":00Z"):i&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(e)&&oe.set(a,s,e+":00:00:00Z"))}else("object"!=typeof e||S(e)||null===e&&o)&&(console.error("formatFormData error: Schema type not found for form value at "+l),console.error("dataMap",t),console.error("recursiveRefMap",r),console.error("genericPointer",l))}})),a}function Oe(e,t,r){var n,o;if(void 0===r&&(r=!1),!N(e)||!oe.isJsonPointer(t)){if(!oe.isJsonPointer(t)){if("string"==typeof t)if(i=e.get(t))return i;console.error("getControl error: Invalid JSON Pointer: "+t)}return N(e)||console.error("getControl error: Invalid formGroup: "+e),null}var i,a=oe.parse(t);if((r&&(a=a.slice(0,-1)),"function"==typeof e.get&&a.every((function(e){return-1===e.indexOf(".")})))&&(i=e.get(a.join("."))))return i;var s=e;try{for(var l=h(a),u=l.next();!u.done;u=l.next()){var p=u.value;if(U(s,"controls")&&(s=s.controls),M(s)&&"-"===p)s=s[s.length-1];else{if(!U(s,p))return console.error('getControl error: Unable to find "'+p+'" item in FormGroup.'),console.error(t),void console.error(e);s=s[p]}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return s}function De(e,t){var r=!oe.get(e,"/formOptions/addSubmit"),n=ke(e.layout,(function(n,i,a){var s={_id:c(),options:{}};if(N(n))Object.assign(s,n),Object.keys(s).filter((function(e){return!_(e,["_id","$ref","arrayItem","arrayItemType","dataPointer","dataType","items","key","name","options","recursiveReference","type","widget"])})).forEach((function(e){s.options[e]=s[e],delete s[e]})),!U(s,"type")&&O(s.widget)&&(s.type=s.widget,delete s.widget),U(s.options,"title")||U(s.options,"legend")&&(s.options.title=s.options.legend,delete s.options.legend),U(s.options,"validationMessages")||(U(s.options,"errorMessages")?(s.options.validationMessages=s.options.errorMessages,delete s.options.errorMessages):U(s.options,"validationMessage")&&("string"==typeof s.options.validationMessage?s.options.validationMessages=s.options.validationMessage:(s.options.validationMessages={},Object.keys(s.options.validationMessage).forEach((function(e){var t=e+"",r="0"===t?"type":"1"===t?"enum":"100"===t?"multipleOf":"101"===t?"minimum":"102"===t?"exclusiveMinimum":"103"===t?"maximum":"104"===t?"exclusiveMaximum":"200"===t?"minLength":"201"===t?"maxLength":"202"===t?"pattern":"300"===t?"minProperties":"301"===t?"maxProperties":"302"===t?"required":"304"===t?"dependencies":"400"===t?"minItems":"401"===t?"maxItems":"402"===t?"uniqueItems":"500"===t?"format":t+"";s.options.validationMessages[r]=s.options.validationMessage[e]}))),delete s.options.validationMessage));else if(oe.isJsonPointer(n))s.dataPointer=n;else{if(!O(n))return console.error("buildLayout error: Form layout element not recognized:"),console.error(n),null;s.key=n}var l=null;if(!U(s,"dataPointer"))if(U(s,"key"))s.dataPointer="*"===s.key?s.key:oe.compile(oe.parseObjectPath(s.key),"-"),delete s.key;else if(U(s,"type")&&"array"===s.type.slice(-5)){var u=function(e){var t,r;if(null!==e&&"object"==typeof e){if(U(e,"dataPointer"))return e.dataPointer;if(M(e.items))try{for(var n=h(e.items),o=n.next();!o.done;o=n.next()){var i=o.value;if(U(i,"dataPointer")&&-1!==i.dataPointer.indexOf("/-"))return i.dataPointer;if(U(i,"items")){var a=u(i);if(a)return a}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}},p=u(s);p&&(s.dataPointer=p.slice(0,p.lastIndexOf("/-")))}if(U(s,"dataPointer")){if("*"===s.dataPointer)return Pe(e,t,e.formValues);var d=oe.get(e.formValues,s.dataPointer.replace(/\/-/g,"/1"));s.dataPointer=oe.toGenericPointer(s.dataPointer,e.arrayMap);var m=oe.toKey(s.dataPointer);!s.name&&O(m)&&"-"!==m&&(s.name=m);var f=de(s.dataPointer,e.dataRecursiveRefMap,e.arrayMap),y=!f.length||f!==s.dataPointer,v=void 0;e.dataMap.has(f)||e.dataMap.set(f,new Map);var g=e.dataMap.get(f);if(g.has("schemaPointer")?v=g.get("schemaPointer"):(v=oe.toSchemaPointer(f,e.schema),g.set("schemaPointer",v)),g.set("disabled",!!s.options.disabled),l=oe.get(e.schema,v)){if(U(s,"type"))if(t.hasWidget(s.type))s.type=me(s.type,l,s);else{var b=s.type;s.type=ce(l,s),console.error('error: widget type "'+b+'" not found in library. Replacing with "'+s.type+'".')}else s.type=ce(l,s);"object"===l.type&&M(l.required)&&g.set("required",l.required),s.dataType=l.type||(U(l,"$ref")?"$ref":null),he(s,l,e),"checkboxes"===s.type&&U(l,"items")?he(s,l.items,e):"array"===s.dataType&&(s.options.maxItems=Math.min(l.maxItems||1e3,s.options.maxItems||1e3),s.options.minItems=Math.max(l.minItems||0,s.options.minItems||0),s.options.listItems=Math.max(s.options.listItems||0,M(d)?d.length:0),s.options.tupleItems=M(l.items)?l.items.length:0,s.options.maxItems<s.options.tupleItems?(s.options.tupleItems=s.options.maxItems,s.options.listItems=0):s.options.maxItems<s.options.tupleItems+s.options.listItems?s.options.listItems=s.options.maxItems-s.options.tupleItems:s.options.minItems>s.options.tupleItems+s.options.listItems&&(s.options.listItems=s.options.minItems-s.options.tupleItems),g.has("maxItems")||(g.set("maxItems",s.options.maxItems),g.set("minItems",s.options.minItems),g.set("tupleItems",s.options.tupleItems),g.set("listItems",s.options.listItems)),e.arrayMap.has(f)||e.arrayMap.set(f,s.options.tupleItems)),fe(e.schema,v)&&(s.options.required=!0,e.fieldsRequired=!0)}else he(s,{},e);if(s.options.title||/^\d+$/.test(s.name)||(s.options.title=te(s.name)),U(s.options,"copyValueTo")&&("string"==typeof s.options.copyValueTo&&(s.options.copyValueTo=[s.options.copyValueTo]),M(s.options.copyValueTo)&&(s.options.copyValueTo=s.options.copyValueTo.map((function(e){return oe.compile(oe.parseObjectPath(e),"-")})))),s.widget=t.getWidget(s.type),g.set("inputType",s.type),g.set("widget",s.widget),"array"===s.dataType&&(U(s,"items")||U(s,"additionalItems"))){var x=de(s.dataPointer+"/-",e.dataRecursiveRefMap,e.arrayMap);if(e.dataMap.has(x)||e.dataMap.set(x,new Map),e.dataMap.get(x).set("inputType","section"),s.items.length>1){for(var I=[],F=s.items.length-1;F>=0;F--){var C=s.items[F];if(U(C,"dataPointer")&&C.dataPointer.slice(0,x.length)===x){var j=s.items.splice(F,1)[0];j.dataPointer=s.dataPointer+"/-"+j.dataPointer.slice(x.length),I.unshift(j)}else C.arrayItem=!0,C.arrayItemType="list",C.removable=!1!==s.options.removable}I.length&&s.items.push({_id:c(),arrayItem:!0,arrayItemType:s.options.tupleItems>s.items.length?"tuple":"list",items:I,options:{removable:!1!==s.options.removable},dataPointer:s.dataPointer+"/-",type:"section",widget:t.getWidget("section")})}else s.items[0].arrayItem=!0,s.items[0].dataPointer||(s.items[0].dataPointer=oe.toGenericPointer(x,e.arrayMap)),oe.has(s,"/items/0/options/removable")||(s.items[0].options.removable=!0),!1===s.options.orderable&&(s.items[0].options.orderable=!1),s.items[0].arrayItemType=s.options.tupleItems?"tuple":"list";if(M(s.items)){var D=s.items.filter((function(e){return"$ref"!==e.type})).length-s.options.tupleItems;D>s.options.listItems&&(s.options.listItems=D,g.set("listItems",D))}if(U(e.layoutRefLibrary,x)||(e.layoutRefLibrary[x]=o(s.items[s.items.length-1]),y&&(e.layoutRefLibrary[x].recursiveReference=!0),H(e.layoutRefLibrary[x],(function(e,t){U(e,"_id")&&(e._id=null),y&&U(e,"dataPointer")&&(e.dataPointer=e.dataPointer.slice(x.length))}),"top-down")),!s.recursiveReference||s.options.required){var P=Math.min(Math.max(s.options.tupleItems+s.options.listItems,M(d)?d.length:0),s.options.maxItems);for(F=s.items.length;F<P;F++)s.items.push(Ne({$ref:x,dataPointer:s.dataPointer,recursiveReference:s.recursiveReference},e,t))}if(!1!==s.options.addable&&s.options.minItems<s.options.maxItems&&"$ref"!==(s.items[s.items.length-1]||{}).type){var k="Add";if(s.options.title)/^add\b/i.test(s.options.title)?k=s.options.title:k+=" "+s.options.title;else if(s.name&&!/^\d+$/.test(s.name))/^add\b/i.test(s.name)?k+=" "+te(s.name):k=te(s.name);else{var S=pe(e.schema,s.dataPointer,"parentSchema");if(U(S,"title"))k+=" to "+S.title;else{var V=oe.parse(s.dataPointer);k+=" to "+te(V[V.length-2])}}s.items.push({_id:c(),arrayItem:!0,arrayItemType:"list",dataPointer:s.dataPointer+"/-",options:{listItems:s.options.listItems,maxItems:s.options.maxItems,minItems:s.options.minItems,removable:!1,title:k,tupleItems:s.options.tupleItems},recursiveReference:y,type:"$ref",widget:t.getWidget("$ref"),$ref:x}),O(oe.get(s,"/style/add"))&&(s.items[s.items.length-1].options.fieldStyle=s.style.add,delete s.style.add,w(s.style)&&delete s.style)}}else s.arrayItem=!1}else if(U(s,"type")||U(s,"items")){var L=oe.get(e.layout,a,0,-2).type;U(s,"type")||(s.type=_(L,["tabs","tabarray"])?"tab":"array"),s.arrayItem="array"===L,s.widget=t.getWidget(s.type),he(s,{},e)}return"submit"===s.type&&(r=!0),s}));if(e.hasRootReference){var i=o(n);"submit"===i[i.length-1].type&&i.pop(),e.layoutRefLibrary[""]={_id:null,dataPointer:"",dataType:"object",items:i,name:"",options:o(e.formOptions.defautWidgetOptions),recursiveReference:!0,required:!1,type:"section",widget:t.getWidget("section")}}return r||n.push({_id:c(),options:{title:"Submit"},type:"submit",widget:t.getWidget("submit")}),n}function Pe(e,t,r,n,o,i,a,s,l,u){void 0===r&&(r=null),void 0===n&&(n=""),void 0===o&&(o=""),void 0===i&&(i=!1),void 0===a&&(a=null),void 0===s&&(s=null),void 0===l&&(l=!1),void 0===u&&(u="");var p=oe.get(e.schema,n);if(!U(p,"type")&&!U(p,"$ref")&&!U(p,"x-schema-form"))return null;var d=ce(p);!C(r)&&(!0===e.formOptions.setSchemaDefaults||"auto"===e.formOptions.setSchemaDefaults&&w(e.formValues))&&(r=oe.get(e.schema,n+"/default"));var m={_id:l?null:c(),arrayItem:i,dataPointer:oe.toGenericPointer(o,e.arrayMap),dataType:p.type||(U(p,"$ref")?"$ref":null),options:{},required:fe(e.schema,n),type:d,widget:t.getWidget(d)},f=oe.toKey(m.dataPointer);"-"!==f&&(m.name=f),m.arrayItem&&(m.arrayItemType=a,m.options.removable=!1!==s);var h=de(u+o,e.dataRecursiveRefMap,e.arrayMap);h.length;e.dataMap.has(h)||e.dataMap.set(h,new Map);var y=e.dataMap.get(h);if(y.has("inputType")||(y.set("schemaPointer",n),y.set("inputType",m.type),y.set("widget",m.widget),y.set("disabled",!!m.options.disabled)),he(m,p,e),m.options.title||!m.name||/^\d+$/.test(m.name)||(m.options.title=te(m.name)),"object"===m.dataType){if(M(p.required)&&!y.has("required")&&y.set("required",p.required),N(p.properties)){var g=[],b=p["ui:order"]||Object.keys(p.properties);if(b.includes("*")&&!U(p.properties,"*"))for(var x=Object.keys(p.properties).filter((function(e){return!b.includes(e)})),I=b.length-1;I>=0;I--)"*"===b[I]&&b.splice.apply(b,v([I,1],x));b.filter((function(e){return U(p.properties,e)||U(p,"additionalProperties")})).forEach((function(i){var a=U(p.properties,i)?"/properties/"+i:"/additionalProperties",s=Pe(e,t,N(r)?r[i]:null,n+a,o+"/"+i,!1,null,null,l,u);s&&(fe(p,"/"+i)&&(s.options.required=!0,e.fieldsRequired=!0),g.push(s))})),""!==o||l?m.items=g:m=g}}else if("array"===m.dataType){m.items=[],m.options.maxItems=Math.min(p.maxItems||1e3,m.options.maxItems||1e3),m.options.minItems=Math.max(p.minItems||0,m.options.minItems||0),!m.options.minItems&&fe(e.schema,n)&&(m.options.minItems=1),U(m.options,"listItems")||(m.options.listItems=1),m.options.tupleItems=M(p.items)?p.items.length:0,m.options.maxItems<=m.options.tupleItems?(m.options.tupleItems=m.options.maxItems,m.options.listItems=0):m.options.maxItems<m.options.tupleItems+m.options.listItems?m.options.listItems=m.options.maxItems-m.options.tupleItems:m.options.minItems>m.options.tupleItems+m.options.listItems&&(m.options.listItems=m.options.minItems-m.options.tupleItems),y.has("maxItems")||(y.set("maxItems",m.options.maxItems),y.set("minItems",m.options.minItems),y.set("tupleItems",m.options.tupleItems),y.set("listItems",m.options.listItems)),e.arrayMap.has(h)||e.arrayMap.set(h,m.options.tupleItems),s=!1!==m.options.removable;var F=null;if(M(p.items)){m.items=[];for(I=0;I<m.options.tupleItems;I++){var j=void 0,O=!(P=de(h+"/"+I,e.dataRecursiveRefMap,e.arrayMap)).length||P!==h+"/"+I;s&&I>=m.options.minItems?(U(e.layoutRefLibrary,P)||(e.layoutRefLibrary[P]=null,e.layoutRefLibrary[P]=Pe(e,t,M(r)?r[I]:null,n+"/items/"+I,O?"":o+"/"+I,!0,"tuple",!0,!0,O?o+"/"+I:""),O&&(e.layoutRefLibrary[P].recursiveReference=!0)),j=Ne({$ref:P,dataPointer:o+"/"+I,recursiveReference:O},e,t,M(r)?r[I]:null)):j=Pe(e,t,M(r)?r[I]:null,n+"/items/"+I,o+"/"+I,!0,"tuple",!1,l,u),j&&m.items.push(j)}N(p.additionalItems)&&(F=n+"/additionalItems")}else N(p.items)&&(F=n+"/items");if(F){O=!(P=de(h+"/-",e.dataRecursiveRefMap,e.arrayMap)).length||P!==h+"/-";var P,k=de(F,e.schemaRecursiveRefMap,e.arrayMap);if(P.length&&!U(e.layoutRefLibrary,P)&&(e.layoutRefLibrary[P]=null,e.layoutRefLibrary[P]=Pe(e,t,null,k,O?"":o+"/-",!0,"list",s,!0,O?o+"/-":""),O&&(e.layoutRefLibrary[P].recursiveReference=!0)),!O||m.options.required){var S=Math.min(Math.max(O?0:m.options.tupleItems+m.options.listItems,M(r)?r.length:0),m.options.maxItems);if(m.items.length<S)for(I=m.items.length;I<S;I++)m.items.push(Ne({$ref:P,dataPointer:o+"/-",recursiveReference:O},e,t,M(r)?r[I]:null))}if(!1!==m.options.addable&&m.options.minItems<m.options.maxItems&&"$ref"!==(m.items[m.items.length-1]||{}).type){var V=(A=((e.layoutRefLibrary[P]||{}).options||{}).title)?"Add ":"Add to ";A||(A=p.title||te(oe.toKey(o))),/^add\b/i.test(A)||(A=V+A),m.items.push({_id:c(),arrayItem:!0,arrayItemType:"list",dataPointer:m.dataPointer+"/-",options:{listItems:m.options.listItems,maxItems:m.options.maxItems,minItems:m.options.minItems,removable:!1,title:A,tupleItems:m.options.tupleItems},recursiveReference:O,type:"$ref",widget:t.getWidget("$ref"),$ref:P})}}}else if("$ref"===m.dataType){var L=oe.compile(p.$ref),E=oe.toDataPointer(L,e.schema),A="";if(m.options.add)A=m.options.add;else if(m.name&&!/^\d+$/.test(m.name))A=(/^add\b/i.test(m.name)?"":"Add ")+te(m.name);else{var T=oe.get(e.schema,n,0,-1);if(U(T,"title"))A="Add to "+T.title;else{var q=oe.parse(m.dataPointer);A="Add to "+te(q[q.length-2])}}if(Object.assign(m,{recursiveReference:!0,widget:t.getWidget("$ref"),$ref:E}),Object.assign(m.options,{removable:!1,title:A}),D(oe.get(e.schema,n,0,-1).maxItems)&&(m.options.maxItems=oe.get(e.schema,n,0,-1).maxItems),E.length)if(U(e.layoutRefLibrary,E))e.layoutRefLibrary[E].recursiveReference||(e.layoutRefLibrary[E].recursiveReference=!0);else{e.layoutRefLibrary[E]=null;var R=Pe(e,t,null,L,"",m.arrayItem,m.arrayItemType,!0,!0,o);R?(R.recursiveReference=!0,e.layoutRefLibrary[E]=R):delete e.layoutRefLibrary[E]}}return m}function ke(e,t,r,n){void 0===r&&(r=""),void 0===n&&(n=e);var o=0,i=[];return H(e,(function(e,a){var s=+a+o,l=r+"/"+s,u=B(e),p=[];N(e)&&(U(e,"tabs")&&(e.items=e.tabs,delete e.tabs),U(e,"items")&&(p=M(e.items)?e.items:[e.items])),p.length&&(u.items=ke(p,t,l+"/items",n)),C(u=t(u,s,l,n))?(M(u)&&(o+=u.length-1),i=i.concat(u)):o--})),i}function Ne(e,t,r,n){if(void 0===r&&(r=null),void 0===n&&(n=null),e.recursiveReference&&r)return(i=o(e)).options||(i.options={}),Object.assign(i,{recursiveReference:!0,widget:r.getWidget("$ref")}),Object.assign(i.options,{removable:!1,title:"Add "+i.$ref}),i;var i=t.layoutRefLibrary[e.$ref];return C(n)?i=Pe(t,r,n,oe.toSchemaPointer(e.$ref,t.schema),e.$ref,i.arrayItem,i.arrayItemType,i.options.removable,!1):(i=o(i),oe.forEachDeep(i,(function(t,r){U(t,"_id")&&(t._id=c()),e.recursiveReference&&U(t,"dataPointer")&&(t.dataPointer=e.dataPointer+t.dataPointer)}))),i}function Me(e,t,r,n){var o,i,a,s,l,u,p,d;void 0===r&&(r=!0),void 0===n&&(n=!0);var c=[],m=!1;if(e)if(M(e))if(t)try{for(var y=h(Object.keys(e)),g=y.next();!g.done;g=y.next()){if(N(e[V=g.value])){var b=e[V].value;if(t.includes(b)){var x=e[V].name;c.push({name:x,value:b}),null==b&&(m=!0)}}else if(O(e[V])&&V<t.length){var I=e[V];b=t[V];c.push({name:I,value:b}),null==b&&(m=!0)}}}catch(e){o={error:e}}finally{try{g&&!g.done&&(i=y.return)&&i.call(y)}finally{if(o)throw o.error}}else c=e,r||(m=!!c.filter((function(e){return void 0===e.value||null===e.value})).length);else if(t)try{for(var F=h(Object.keys(t)),C=F.next();!C.done;C=F.next()){if(U(e,b=t[V=C.value])){var j=e[b];c.push({name:j,value:b}),null==b&&(m=!0)}}}catch(e){a={error:e}}finally{try{C&&!C.done&&(s=F.return)&&s.call(F)}finally{if(a)throw a.error}}else try{for(var w=h(Object.keys(e)),D=w.next();!D.done;D=w.next()){var P=e[b=D.value];c.push({name:P,value:b}),null==b&&(m=!0)}}catch(e){l={error:e}}finally{try{D&&!D.done&&(u=w.return)&&u.call(w)}finally{if(l)throw l.error}}else if(t)try{for(var k=h(Object.keys(t)),S=k.next();!S.done;S=k.next()){var V,L=t[V=S.value];b=t[V];c.push({name:L,value:b}),null==b&&(m=!0)}}catch(e){p={error:e}}finally{try{S&&!S.done&&(d=k.return)&&d.call(k)}finally{if(p)throw p.error}}else c=[{name:"True",value:!0},{name:"False",value:!1}];return c.some((function(e){return U(e,"group")}))&&(m=!1,c=n?c.reduce((function(e,t){return U(t,"group")?(M(t.items)&&(e=v(e,t.items.map((function(e){return f({},e,{name:t.group+": "+e.name})}))),t.items.some((function(e){return void 0===e.value||null===e.value}))&&(m=!0)),U(t,"name")&&U(t,"value")&&(t.name=t.group+": "+t.name,delete t.group,e.push(t),void 0!==t.value&&null!==t.value||(m=!0))):(e.push(t),void 0!==t.value&&null!==t.value||(m=!0)),e}),[]):c.reduce((function(e,t){return U(t,"group")?(t.group!==(e[e.length-1]||{}).group&&e.push({group:t.group,items:t.items||[]}),U(t,"name")&&U(t,"value")&&(e[e.length-1].items.push({name:t.name,value:t.value}),void 0!==t.value&&null!==t.value||(m=!0))):(e.push(t),void 0!==t.value&&null!==t.value||(m=!0)),e}),[])),r||m||c.unshift({name:"<em>None</em>",value:null}),c}var Se=["January","February","March","April","May","June","July","August","September","October","November","December"],Ve=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Le=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ee=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var Ae={required:"This field is required.",minLength:"Must be {{minimumLength}} characters or longer (current length: {{currentLength}})",maxLength:"Must be {{maximumLength}} characters or shorter (current length: {{currentLength}})",pattern:"Must match pattern: {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return'Must be a date, like "2000-12-31"';case"time":return'Must be a time, like "16:20" or "03:14:15.9265"';case"date-time":return'Must be a date-time, like "2000-03-14T01:59" or "2000-03-14T01:59:26.535Z"';case"email":return'Must be an email address, like "name@example.com"';case"hostname":return'Must be a hostname, like "example.com"';case"ipv4":return'Must be an IPv4 address, like "127.0.0.1"';case"ipv6":return'Must be an IPv6 address, like "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'Must be a url, like "http://www.example.com/page.html"';case"uuid":return'Must be a uuid, like "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'Must be a color, like "#FFFFFF" or "rgb(255, 255, 255)"';case"json-pointer":return'Must be a JSON Pointer, like "/pointer/to/something"';case"relative-json-pointer":return'Must be a relative JSON Pointer, like "2/pointer/to/something"';case"regex":return'Must be a regular expression, like "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"Must be a correctly formatted "+e.requiredFormat}},minimum:"Must be {{minimumValue}} or more",exclusiveMinimum:"Must be more than {{exclusiveMinimumValue}}",maximum:"Must be {{maximumValue}} or less",exclusiveMaximum:"Must be less than {{exclusiveMaximumValue}}",multipleOf:function(e){return 1/e.multipleOfValue%10==0?"Must have "+Math.log10(1/e.multipleOfValue)+" or fewer decimal places.":"Must be a multiple of "+e.multipleOfValue+"."},minProperties:"Must have {{minimumProperties}} or more items (current items: {{currentProperties}})",maxProperties:"Must have {{maximumProperties}} or fewer items (current items: {{currentProperties}})",minItems:"Must have {{minimumItems}} or more items (current items: {{currentItems}})",maxItems:"Must have {{maximumItems}} or fewer items (current items: {{currentItems}})",uniqueItems:"All items must be unique"},Te={required:"Est obligatoire.",minLength:"Doit avoir minimum {{minimumLength}} caractères (actuellement: {{currentLength}})",maxLength:"Doit avoir maximum {{maximumLength}} caractères (actuellement: {{currentLength}})",pattern:"Doit respecter: {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return'Doit être une date, tel que "2000-12-31"';case"time":return'Doit être une heure, tel que "16:20" ou "03:14:15.9265"';case"date-time":return'Doit être une date et une heure, tel que "2000-03-14T01:59" ou "2000-03-14T01:59:26.535Z"';case"email":return'Doit être une adresse e-mail, tel que "name@example.com"';case"hostname":return'Doit être un nom de domaine, tel que "example.com"';case"ipv4":return'Doit être une adresse IPv4, tel que "127.0.0.1"';case"ipv6":return'Doit être une adresse IPv6, tel que "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'Doit être une URL, tel que "http://www.example.com/page.html"';case"uuid":return'Doit être un UUID, tel que "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'Doit être une couleur, tel que "#FFFFFF" or "rgb(255, 255, 255)"';case"json-pointer":return'Doit être un JSON Pointer, tel que "/pointer/to/something"';case"relative-json-pointer":return'Doit être un relative JSON Pointer, tel que "2/pointer/to/something"';case"regex":return'Doit être une expression régulière, tel que "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"Doit être avoir le format correct: "+e.requiredFormat}},minimum:"Doit être supérieur à {{minimumValue}}",exclusiveMinimum:"Doit avoir minimum {{exclusiveMinimumValue}} charactères",maximum:"Doit être inférieur à {{maximumValue}}",exclusiveMaximum:"Doit avoir maximum {{exclusiveMaximumValue}} charactères",multipleOf:function(e){return 1/e.multipleOfValue%10==0?"Doit comporter "+Math.log10(1/e.multipleOfValue)+" ou moins de decimales.":"Doit être un multiple de "+e.multipleOfValue+"."},minProperties:"Doit comporter au minimum {{minimumProperties}} éléments",maxProperties:"Doit comporter au maximum {{maximumProperties}} éléments",minItems:"Doit comporter au minimum {{minimumItems}} éléments",maxItems:"Doit comporter au maximum {{minimumItems}} éléments",uniqueItems:"Tous les éléments doivent être uniques"},qe={required:"Il campo è obbligatorio",minLength:"Deve inserire almeno {{minimumLength}} caratteri (lunghezza corrente: {{currentLength}})",maxLength:"Il numero massimo di caratteri consentito è {{maximumLength}} (lunghezza corrente: {{currentLength}})",pattern:"Devi rispettare il pattern : {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return'Deve essere una data, come "31-12-2000"';case"time":return'Deve essere un orario, come "16:20" o "03:14:15.9265"';case"date-time":return'Deve essere data-orario, come "14-03-2000T01:59" or "14-03-2000T01:59:26.535Z"';case"email":return'Deve essere un indirzzo email, come "name@example.com"';case"hostname":return'Deve essere un hostname, come "example.com"';case"ipv4":return'Deve essere un indirizzo IPv4, come "127.0.0.1"';case"ipv6":return'Deve essere un indirizzo IPv6, come "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'Deve essere un url, come "http://www.example.com/page.html"';case"uuid":return'Deve essere un uuid, come "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'Deve essere un colore, come "#FFFFFF" o "rgb(255, 255, 255)"';case"json-pointer":return'Deve essere un JSON Pointer, come "/pointer/to/something"';case"relative-json-pointer":return'Deve essere un JSON Pointer relativo, come "2/pointer/to/something"';case"regex":return'Deve essere una regular expression, come "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"Deve essere formattato correttamente "+e.requiredFormat}},minimum:"Deve essere {{minimumValue}} o più",exclusiveMinimum:"Deve essere più di {{exclusiveMinimumValue}}",maximum:"Deve essere {{maximumValue}} o meno",exclusiveMaximum:"Deve essere minore di {{exclusiveMaximumValue}}",multipleOf:function(e){return 1/e.multipleOfValue%10==0?"Deve avere "+Math.log10(1/e.multipleOfValue)+" o meno decimali.":"Deve essere multiplo di "+e.multipleOfValue+"."},minProperties:"Deve avere {{minimumProperties}} o più elementi (elementi correnti: {{currentProperties}})",maxProperties:"Deve avere {{maximumProperties}} o meno elementi (elementi correnti: {{currentProperties}})",minItems:"Deve avere {{minimumItems}} o più elementi (elementi correnti: {{currentItems}})",maxItems:"Deve avere {{maximumItems}} o meno elementi (elementi correnti: {{currentItems}})",uniqueItems:"Tutti gli elementi devono essere unici"},Re={required:"Este campo é obrigatório.",minLength:"É preciso no mínimo {{minimumLength}} caracteres ou mais (tamanho atual: {{currentLength}})",maxLength:"É preciso no máximo  {{maximumLength}} caracteres ou menos (tamanho atual: {{currentLength}})",pattern:"Tem que ajustar ao formato: {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return'Tem que ser uma data, por exemplo "2000-12-31"';case"time":return'Tem que ser horário, por exemplo "16:20" ou "03:14:15.9265"';case"date-time":return'Tem que ser data e hora, por exemplo "2000-03-14T01:59" ou "2000-03-14T01:59:26.535Z"';case"email":return'Tem que ser um email, por exemplo "fulano@exemplo.com.br"';case"hostname":return'Tem que ser uma nome de domínio, por exemplo "exemplo.com.br"';case"ipv4":return'Tem que ser um endereço IPv4, por exemplo "127.0.0.1"';case"ipv6":return'Tem que ser um endereço IPv6, por exemplo "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'Tem que ser uma URL, por exemplo "http://www.exemplo.com.br/pagina.html"';case"uuid":return'Tem que ser um uuid, por exemplo "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'Tem que ser uma cor, por exemplo "#FFFFFF" ou "rgb(255, 255, 255)"';case"json-pointer":return'Tem que ser um JSON Pointer, por exemplo "/referencia/para/algo"';case"relative-json-pointer":return'Tem que ser um JSON Pointer relativo, por exemplo "2/referencia/para/algo"';case"regex":return'Tem que ser uma expressão regular, por exemplo "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"Tem que ser no formato: "+e.requiredFormat}},minimum:"Tem que ser {{minimumValue}} ou mais",exclusiveMinimum:"Tem que ser mais que {{exclusiveMinimumValue}}",maximum:"Tem que ser {{maximumValue}} ou menos",exclusiveMaximum:"Tem que ser menor que {{exclusiveMaximumValue}}",multipleOf:function(e){return 1/e.multipleOfValue%10==0?"Tem que ter "+Math.log10(1/e.multipleOfValue)+" ou menos casas decimais.":"Tem que ser um múltiplo de "+e.multipleOfValue+"."},minProperties:"Deve ter {{minimumProperties}} ou mais itens (itens até o momento: {{currentProperties}})",maxProperties:"Deve ter {{maximumProperties}} ou menos intens (itens até o momento: {{currentProperties}})",minItems:"Deve ter {{minimumItems}} ou mais itens (itens até o momento: {{currentItems}})",maxItems:"Deve ter {{maximumItems}} ou menos itens (itens até o momento: {{currentItems}})",uniqueItems:"Todos os itens devem ser únicos"},$e={required:"必填字段.",minLength:"字符长度必须大于或者等于 {{minimumLength}} (当前长度: {{currentLength}})",maxLength:"字符长度必须小于或者等于 {{maximumLength}} (当前长度: {{currentLength}})",pattern:"必须匹配正则表达式: {{requiredPattern}}",format:function(e){switch(e.requiredFormat){case"date":return'必须为日期格式, 比如 "2000-12-31"';case"time":return'必须为时间格式, 比如 "16:20" 或者 "03:14:15.9265"';case"date-time":return'必须为日期时间格式, 比如 "2000-03-14T01:59" 或者 "2000-03-14T01:59:26.535Z"';case"email":return'必须为邮箱地址, 比如 "name@example.com"';case"hostname":return'必须为主机名, 比如 "example.com"';case"ipv4":return'必须为 IPv4 地址, 比如 "127.0.0.1"';case"ipv6":return'必须为 IPv6 地址, 比如 "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'必须为 url, 比如 "http://www.example.com/page.html"';case"uuid":return'必须为 uuid, 比如 "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'必须为颜色值, 比如 "#FFFFFF" 或者 "rgb(255, 255, 255)"';case"json-pointer":return'必须为 JSON Pointer, 比如 "/pointer/to/something"';case"relative-json-pointer":return'必须为相对的 JSON Pointer, 比如 "2/pointer/to/something"';case"regex":return'必须为正则表达式, 比如 "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"必须为格式正确的 "+e.requiredFormat}},minimum:"必须大于或者等于最小值: {{minimumValue}}",exclusiveMinimum:"必须大于最小值: {{exclusiveMinimumValue}}",maximum:"必须小于或者等于最大值: {{maximumValue}}",exclusiveMaximum:"必须小于最大值: {{exclusiveMaximumValue}}",multipleOf:function(e){return 1/e.multipleOfValue%10==0?"必须有 "+Math.log10(1/e.multipleOfValue)+" 位或更少的小数位":"必须为 "+e.multipleOfValue+" 的倍数"},minProperties:"项目数必须大于或者等于 {{minimumProperties}} (当前项目数: {{currentProperties}})",maxProperties:"项目数必须小于或者等于 {{maximumProperties}} (当前项目数: {{currentProperties}})",minItems:"项目数必须大于或者等于 {{minimumItems}} (当前项目数: {{currentItems}})",maxItems:"项目数必须小于或者等于 {{maximumItems}} (当前项目数: {{currentItems}})",uniqueItems:"所有项目必须是唯一的"};var ze=function(){function e(){this.JsonFormCompatibility=!1,this.ReactJsonSchemaFormCompatibility=!1,this.AngularSchemaFormCompatibility=!1,this.tpldata={},this.ajvOptions={allErrors:!0,jsonPointers:!0,unknownFormats:"ignore"},this.ajv=new s(this.ajvOptions),this.validateFormData=null,this.formValues={},this.data={},this.schema={},this.layout=[],this.formGroupTemplate={},this.formGroup=null,this.framework=null,this.validData=null,this.isValid=null,this.ajvErrors=null,this.validationErrors=null,this.dataErrors=new Map,this.formValueSubscription=null,this.dataChanges=new a.Subject,this.isValidChanges=new a.Subject,this.validationErrorChanges=new a.Subject,this.arrayMap=new Map,this.dataMap=new Map,this.dataRecursiveRefMap=new Map,this.schemaRecursiveRefMap=new Map,this.schemaRefLibrary={},this.layoutRefLibrary={"":null},this.templateRefLibrary={},this.hasRootReference=!1,this.language="en-US",this.defaultFormOptions={autocomplete:!0,addSubmit:"auto",debug:!1,disableInvalidSubmit:!0,formDisabled:!1,formReadonly:!1,fieldsRequired:!1,framework:"no-framework",loadExternalAssets:!1,pristine:{errors:!0,success:!0},supressPropertyTitles:!1,setSchemaDefaults:"auto",setLayoutDefaults:"auto",validateOnRender:"auto",widgets:{},defautWidgetOptions:{listItems:1,addable:!0,orderable:!0,removable:!0,enableErrorState:!0,enableSuccessState:!0,feedback:!1,feedbackOnRender:!1,notitle:!1,disabled:!1,readonly:!1,returnEmptyFields:!0,validationMessages:{}}},this.setLanguage(this.language),this.ajv.addMetaSchema(l)}return e.prototype.setLanguage=function(e){void 0===e&&(e="en-US"),this.language=e;var t={fr:Te,en:Ae,it:qe,pt:Re,zh:$e}[e.slice(0,2)];this.defaultFormOptions.defautWidgetOptions.validationMessages=o(t)},e.prototype.getData=function(){return this.data},e.prototype.getSchema=function(){return this.schema},e.prototype.getLayout=function(){return this.layout},e.prototype.resetAllValues=function(){this.JsonFormCompatibility=!1,this.ReactJsonSchemaFormCompatibility=!1,this.AngularSchemaFormCompatibility=!1,this.tpldata={},this.validateFormData=null,this.formValues={},this.schema={},this.layout=[],this.formGroupTemplate={},this.formGroup=null,this.framework=null,this.data={},this.validData=null,this.isValid=null,this.validationErrors=null,this.arrayMap=new Map,this.dataMap=new Map,this.dataRecursiveRefMap=new Map,this.schemaRecursiveRefMap=new Map,this.layoutRefLibrary={},this.schemaRefLibrary={},this.templateRefLibrary={},this.formOptions=o(this.defaultFormOptions)},e.prototype.buildRemoteError=function(e){var t=this;H(e,(function(e,r){var n,o;if(r in t.formGroup.controls)try{for(var i=h(e),a=i.next();!a.done;a=i.next()){var s=a.value,l={};l[s.code]=s.message,t.formGroup.get(r).setErrors(l,{emitEvent:!0})}}catch(e){n={error:e}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}}))},e.prototype.validateData=function(e,t){void 0===t&&(t=!0),this.data=we(e,this.dataMap,this.dataRecursiveRefMap,this.arrayMap,this.formOptions.returnEmptyFields),this.isValid=this.validateFormData(this.data),this.validData=this.isValid?this.data:null;var r,n;this.ajvErrors=this.validateFormData.errors,this.validationErrors=(r=this.validateFormData.errors,n={},(r||[]).forEach((function(e){n[e.dataPath]||(n[e.dataPath]=[]),n[e.dataPath].push(e.message)})),n),t&&(this.dataChanges.next(this.data),this.isValidChanges.next(this.isValid),this.validationErrorChanges.next(this.ajvErrors))},e.prototype.buildFormGroupTemplate=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!0),this.formGroupTemplate=Fe(this,e,t)},e.prototype.buildFormGroup=function(){var e=this;this.formGroup=Ce(this.formGroupTemplate),this.formGroup&&(this.compileAjvSchema(),this.validateData(this.formGroup.value),this.formValueSubscription&&this.formValueSubscription.unsubscribe(),this.formValueSubscription=this.formGroup.valueChanges.subscribe((function(t){return e.validateData(t)})))},e.prototype.buildLayout=function(e){this.layout=De(this,e)},e.prototype.setOptions=function(e){if(N(e)){var t=o(e);N(t.defaultOptions)&&(Object.assign(this.formOptions.defautWidgetOptions,t.defaultOptions),delete t.defaultOptions),N(t.defautWidgetOptions)&&(Object.assign(this.formOptions.defautWidgetOptions,t.defautWidgetOptions),delete t.defautWidgetOptions),Object.assign(this.formOptions,t);var r=this.formOptions.defautWidgetOptions;["ErrorState","SuccessState"].filter((function(e){return U(r,"disable"+e)})).forEach((function(e){r["enable"+e]=!r["disable"+e],delete r["disable"+e]}))}},e.prototype.compileAjvSchema=function(){this.validateFormData||(Array.isArray(this.schema.properties["ui:order"])&&(this.schema["ui:order"]=this.schema.properties["ui:order"],delete this.schema.properties["ui:order"]),this.ajv.removeSchema(this.schema),this.validateFormData=this.ajv.compile(this.schema))},e.prototype.buildSchemaFromData=function(e,t){if(void 0===t&&(t=!1),e)return ue(e,t);this.schema=ue(this.formValues,t)},e.prototype.buildSchemaFromLayout=function(e){e||(this.schema=void this.layout)},e.prototype.setTpldata=function(e){void 0===e&&(e={}),this.tpldata=e},e.prototype.parseText=function(e,t,r,n){var o=this;return void 0===e&&(e=""),void 0===t&&(t={}),void 0===r&&(r={}),void 0===n&&(n=null),e&&/{{.+?}}/.test(e)?e.replace(/{{(.+?)}}/g,(function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return o.parseExpression(e[1],t,r,n,o.tpldata)})):e},e.prototype.parseExpression=function(e,t,r,n,o){var i=this;if(void 0===e&&(e=""),void 0===t&&(t={}),void 0===r&&(r={}),void 0===n&&(n=null),void 0===o&&(o=null),"string"!=typeof e)return"";var a="number"==typeof n?n+1+"":n||"";if(("'"===(e=e.trim())[0]||'"'===e[0])&&e[0]===e[e.length-1]&&-1===e.slice(1,e.length-1).indexOf(e[0]))return e.slice(1,e.length-1);if("idx"===e||"$index"===e)return a;if("value"===e&&!U(r,"value"))return t;if(['"',"'"," ","||","&&","+"].every((function(t){return-1===e.indexOf(t)}))){var s=oe.parseObjectPath(e);return"value"===s[0]&&oe.has(t,s.slice(1))?oe.get(t,s.slice(1)):"values"===s[0]&&oe.has(r,s.slice(1))?oe.get(r,s.slice(1)):"tpldata"===s[0]&&oe.has(o,s.slice(1))?oe.get(o,s.slice(1)):oe.has(r,s)?oe.get(r,s):""}return e.indexOf("[idx]")>-1&&(e=e.replace(/\[idx\]/g,a)),e.indexOf("[$index]")>-1&&(e=e.replace(/\[$index\]/g,a)),e.indexOf("||")>-1?e.split("||").reduce((function(e,a){return e||i.parseExpression(a,t,r,n,o)}),""):e.indexOf("&&")>-1?e.split("&&").reduce((function(e,a){return e&&i.parseExpression(a,t,r,n,o)})," ").trim():e.indexOf("+")>-1?e.split("+").map((function(e){return i.parseExpression(e,t,r,n,o)})).join(""):""},e.prototype.setArrayItemTitle=function(e,t,r){void 0===e&&(e={}),void 0===t&&(t=null),void 0===r&&(r=null);var n=e.layoutNode,o=this.getFormControlValue(e),i="array"===(n.type||"").slice(-5)&&M(o),a=oe.getFirst(i&&"$ref"!==t.type?[[t,"/options/legend"],[t,"/options/title"],[n,"/options/title"],[n,"/options/legend"]]:[[t,"/options/title"],[t,"/options/legend"],[n,"/options/title"],[n,"/options/legend"]]);if(!a)return a;var s=M(o)&&r<o.length?o[r]:o;return this.parseText(a,s,o,r)},e.prototype.setItemTitle=function(e){return!e.options.title&&/^(\d+|-)$/.test(e.layoutNode.name)?null:this.parseText(e.options.title||re(e.layoutNode.name),this.getFormControlValue(this),(this.getFormControlGroup(this)||{}).value,e.dataIndex[e.dataIndex.length-1])},e.prototype.evaluateCondition=function(e,t){var r=t&&t[t.length-1],n=!0;if(j((e.options||{}).condition))if("string"==typeof e.options.condition){var o=e.options.condition;j(r)&&(o=o.replace("[arrayIndex]","["+r+"]")),o=oe.parseObjectPath(o),(n=!!oe.get(this.data,o))||"model"!==o[0]||(n=!!oe.get({model:this.data},o))}else if("function"==typeof e.options.condition)n=e.options.condition(this.data);else if("string"==typeof e.options.condition.functionBody)try{n=new Function("model","arrayIndices",e.options.condition.functionBody)(this.data,t)}catch(t){n=!0,console.error("condition functionBody errored out on evaluation: "+e.options.condition.functionBody)}return n},e.prototype.initializeControl=function(e,t){if(void 0===t&&(t=!0),!N(e))return!1;if(w(e.options)&&(e.options=w((e.layoutNode||{}).options)?o(this.formOptions):e.layoutNode.options),e.formControl=this.getFormControl(e),e.boundControl=t&&!!e.formControl,e.formControl)e.controlName=this.getFormControlName(e),e.controlValue=e.formControl.value,e.controlDisabled=e.formControl.disabled,e.options.errorMessage="VALID"===e.formControl.status?null:this.formatErrors(e.formControl.errors,e.options.validationMessages),e.options.showErrors=!0===this.formOptions.validateOnRender||"auto"===this.formOptions.validateOnRender&&j(e.controlValue),this.validationErrorChanges.subscribe((function(t){e.options.errorMessage=""+t})),e.formControl.valueChanges.subscribe((function(t){t&&(e.controlValue=t)}));else{e.controlName=e.layoutNode.name,e.controlValue=e.layoutNode.value||null;var r=this.getDataPointer(e);t&&r&&console.error('warning: control "'+r+'" is not bound to the Angular FormGroup.')}return e.boundControl},e.prototype.formatErrors=function(e,t){if(void 0===t&&(t={}),w(e))return null;N(t)||(t={});var r=function(e){return e[0].toUpperCase()+(e.slice(1)||"").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ")},n=function(e){return"object"==typeof e?Object.keys(e).map((function(t){return!0===e[t]?r(t):!1===e[t]?"Not "+r(t):r(t)+": "+n(e[t])})).join(", "):r(e.toString())};return Object.keys(e).filter((function(t){return"required"!==t||1===Object.keys(e).length})).map((function(o){return"string"==typeof t?t:"function"==typeof t[o]?t[o](e[o]):"string"==typeof t[o]?/{{.+?}}/.test(t[o])?Object.keys(e[o]).reduce((function(t,r){return t.replace(new RegExp("{{"+r+"}}","g"),e[o][r])}),t[o]):t[o]:r(o)+" Error: "+n(e[o])})).join("<br>")},e.prototype.updateValue=function(e,t){var r,n;if(e.controlValue=t,e.boundControl&&(e.formControl.setValue(t),e.formControl.markAsDirty()),e.layoutNode.value=t,M(e.options.copyValueTo))try{for(var o=h(e.options.copyValueTo),i=o.next();!i.done;i=o.next()){var a=i.value,s=Oe(this.formGroup,a);N(s)&&"function"==typeof s.setValue&&(s.setValue(t),s.markAsDirty())}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e.prototype.updateArrayCheckboxList=function(e,t){for(var r,n,o=this.getFormControl(e);o.value.length;)o.removeAt(0);var i=de(e.layoutNode.dataPointer+"/-",this.dataRecursiveRefMap,this.arrayMap);try{for(var a=h(t),s=a.next();!s.done;s=a.next()){var l=s.value;if(l.checked){var u=Ce(this.templateRefLibrary[i]);u.setValue(l.value),o.push(u)}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}o.markAsDirty()},e.prototype.getFormControl=function(e){return e.layoutNode&&C(e.layoutNode.dataPointer)&&"$ref"!==e.layoutNode.type?Oe(this.formGroup,this.getDataPointer(e)):null},e.prototype.getFormControlValue=function(e){if(!e.layoutNode||!C(e.layoutNode.dataPointer)||"$ref"===e.layoutNode.type)return null;var t=Oe(this.formGroup,this.getDataPointer(e));return t?t.value:null},e.prototype.getFormControlGroup=function(e){return e.layoutNode&&C(e.layoutNode.dataPointer)?Oe(this.formGroup,this.getDataPointer(e),!0):null},e.prototype.getFormControlName=function(e){return e.layoutNode&&C(e.layoutNode.dataPointer)&&j(e.dataIndex)?oe.toKey(this.getDataPointer(e)):null},e.prototype.getLayoutArray=function(e){return oe.get(this.layout,this.getLayoutPointer(e),0,-1)},e.prototype.getParentNode=function(e){return oe.get(this.layout,this.getLayoutPointer(e),0,-2)},e.prototype.getDataPointer=function(e){return e.layoutNode&&C(e.layoutNode.dataPointer)&&j(e.dataIndex)?oe.toIndexedPointer(e.layoutNode.dataPointer,e.dataIndex,this.arrayMap):null},e.prototype.getLayoutPointer=function(e){return j(e.layoutIndex)?"/"+e.layoutIndex.join("/items/"):null},e.prototype.isControlBound=function(e){if(!e.layoutNode||!C(e.layoutNode.dataPointer)||!j(e.dataIndex))return!1;var t=this.getFormControlGroup(e),r=this.getFormControlName(e);return!!t&&U(t.controls,r)},e.prototype.addItem=function(e,t){if(!(e.layoutNode&&C(e.layoutNode.$ref)&&j(e.dataIndex)&&j(e.layoutIndex)))return!1;var r=Ce(this.templateRefLibrary[e.layoutNode.$ref]);e.layoutNode.arrayItem?this.getFormControlGroup(e).push(r):this.getFormControlGroup(e).addControl(t||this.getFormControlName(e),r);var n=Ne(e.layoutNode,this);return n.arrayItem=e.layoutNode.arrayItem,e.layoutNode.arrayItemType?n.arrayItemType=e.layoutNode.arrayItemType:delete n.arrayItemType,t&&(n.name=t,n.dataPointer+="/"+oe.escape(t),n.options.title=te(t)),oe.insert(this.layout,this.getLayoutPointer(e),n),!0},e.prototype.moveArrayItem=function(e,t,r){if(!(e.layoutNode&&C(e.layoutNode.dataPointer)&&j(e.dataIndex)&&j(e.layoutIndex)&&C(t)&&C(r)&&t!==r))return!1;var n=this.getFormControlGroup(e),o=n.at(t);n.removeAt(t),n.insert(r,o),n.updateValueAndValidity();var i=this.getLayoutArray(e);return i.splice(r,0,i.splice(t,1)[0]),!0},e.prototype.removeItem=function(e){return!!(e.layoutNode&&C(e.layoutNode.dataPointer)&&j(e.dataIndex)&&j(e.layoutIndex))&&(e.layoutNode.arrayItem?this.getFormControlGroup(e).removeAt(e.dataIndex[e.dataIndex.length-1]):this.getFormControlGroup(e).removeControl(this.getFormControlName(e)),oe.remove(this.layout,this.getLayoutPointer(e)),!0)},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var We=function(){function e(e){this.jsf=e}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{}},Object.defineProperty(e.prototype,"showAddButton",{get:function(){return!this.layoutNode.arrayItem||this.layoutIndex[this.layoutIndex.length-1]<this.options.maxItems},enumerable:!0,configurable:!0}),e.prototype.addItem=function(e){e.preventDefault(),this.jsf.addItem(this)},Object.defineProperty(e.prototype,"buttonText",{get:function(){var e={dataIndex:this.dataIndex.slice(0,-1),layoutIndex:this.layoutIndex.slice(0,-1),layoutNode:this.jsf.getParentNode(this)};return e.layoutNode.add||this.jsf.setArrayItemTitle(e,this.layoutNode,this.itemCount)},enumerable:!0,configurable:!0}),e.decorators=[{type:n.Component,args:[{selector:"add-reference-widget",template:'\n    <button *ngIf="showAddButton"\n      [class]="options?.fieldHtmlClass || \'\'"\n      [disabled]="options?.readonly"\n      (click)="addItem($event)">\n      <span *ngIf="options?.icon" [class]="options?.icon"></span>\n      <span *ngIf="options?.title" [innerHTML]="buttonText"></span>\n    </button>',changeDetection:n.ChangeDetectionStrategy.Default}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var _e=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){"function"==typeof this.options.onClick?this.options.onClick(e):this.jsf.updateValue(this,e.target.value)},e.decorators=[{type:n.Component,args:[{selector:"button-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <button\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [name]="controlName"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (click)="updateValue($event)">\n        <span *ngIf="options?.icon || options?.title"\n          [class]="options?.icon"\n          [innerHTML]="options?.title"></span>\n      </button>\n    </div>'}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var Je=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.trueValue=!0,this.falseValue=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),null!==this.controlValue&&void 0!==this.controlValue||(this.controlValue=this.options.title)},e.prototype.updateValue=function(e){e.preventDefault(),this.jsf.updateValue(this,e.target.checked?this.trueValue:this.falseValue)},Object.defineProperty(e.prototype,"isChecked",{get:function(){return this.jsf.getFormControlValue(this)===this.trueValue},enumerable:!0,configurable:!0}),e.decorators=[{type:n.Component,args:[{selector:"checkbox-widget",template:"\n    <label\n      [attr.for]=\"'control' + layoutNode?._id\"\n      [class]=\"options?.itemLabelHtmlClass || ''\">\n      <input *ngIf=\"boundControl\"\n        [formControl]=\"formControl\"\n        [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n        [class]=\"(options?.fieldHtmlClass || '') + (isChecked ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\"\n        [id]=\"'control' + layoutNode?._id\"\n        [name]=\"controlName\"\n        [readonly]=\"options?.readonly ? 'readonly' : null\"\n        type=\"checkbox\">\n      <input *ngIf=\"!boundControl\"\n        [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n        [checked]=\"isChecked ? 'checked' : null\"\n        [class]=\"(options?.fieldHtmlClass || '') + (isChecked ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\"\n        [disabled]=\"controlDisabled\"\n        [id]=\"'control' + layoutNode?._id\"\n        [name]=\"controlName\"\n        [readonly]=\"options?.readonly ? 'readonly' : null\"\n        [value]=\"controlValue\"\n        type=\"checkbox\"\n        (change)=\"updateValue($event)\">\n      <span *ngIf=\"options?.title\"\n        [style.display]=\"options?.notitle ? 'none' : ''\"\n        [innerHTML]=\"options?.title\"></span>\n    </label>"}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var Be=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.checkboxList=[]}return e.prototype.ngOnInit=function(){if(this.options=this.layoutNode.options||{},this.layoutOrientation="checkboxes-inline"===this.layoutNode.type||"checkboxbuttons"===this.layoutNode.type?"horizontal":"vertical",this.jsf.initializeControl(this),this.checkboxList=Me(this.options.titleMap||this.options.enumNames,this.options.enum,!0),this.boundControl){var e=this.jsf.getFormControl(this);this.checkboxList.forEach((function(t){return t.checked=e.value.includes(t.value)}))}},e.prototype.updateValue=function(e){var t,r;try{for(var n=h(this.checkboxList),o=n.next();!o.done;o=n.next()){var i=o.value;e.target.value===i.value&&(i.checked=e.target.checked)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}this.boundControl&&this.jsf.updateArrayCheckboxList(this,this.checkboxList)},e.decorators=[{type:n.Component,args:[{selector:"checkboxes-widget",template:'\n    <label *ngIf="options?.title"\n      [class]="options?.labelHtmlClass || \'\'"\n      [style.display]="options?.notitle ? \'none\' : \'\'"\n      [innerHTML]="options?.title"></label>\n\n    \x3c!-- \'horizontal\' = checkboxes-inline or checkboxbuttons --\x3e\n    <div *ngIf="layoutOrientation === \'horizontal\'" [class]="options?.htmlClass || \'\'">\n      <label *ngFor="let checkboxItem of checkboxList"\n        [attr.for]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n        [class]="(options?.itemLabelHtmlClass || \'\') + (checkboxItem.checked ?\n          (\' \' + (options?.activeClass || \'\') + \' \' + (options?.style?.selected || \'\')) :\n          (\' \' + (options?.style?.unselected || \'\')))">\n        <input type="checkbox"\n          [attr.required]="options?.required"\n          [checked]="checkboxItem.checked"\n          [class]="options?.fieldHtmlClass || \'\'"\n          [disabled]="controlDisabled"\n          [id]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n          [name]="checkboxItem?.name"\n          [readonly]="options?.readonly ? \'readonly\' : null"\n          [value]="checkboxItem.value"\n          (change)="updateValue($event)">\n        <span [innerHTML]="checkboxItem.name"></span>\n      </label>\n    </div>\n\n    \x3c!-- \'vertical\' = regular checkboxes --\x3e\n    <div *ngIf="layoutOrientation === \'vertical\'">\n      <div *ngFor="let checkboxItem of checkboxList" [class]="options?.htmlClass || \'\'">\n        <label\n          [attr.for]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n          [class]="(options?.itemLabelHtmlClass || \'\') + (checkboxItem.checked ?\n            (\' \' + (options?.activeClass || \'\') + \' \' + (options?.style?.selected || \'\')) :\n            (\' \' + (options?.style?.unselected || \'\')))">\n          <input type="checkbox"\n            [attr.required]="options?.required"\n            [checked]="checkboxItem.checked"\n            [class]="options?.fieldHtmlClass || \'\'"\n            [disabled]="controlDisabled"\n            [id]="options?.name + \'/\' + checkboxItem.value"\n            [name]="checkboxItem?.name"\n            [readonly]="options?.readonly ? \'readonly\' : null"\n            [value]="checkboxItem.value"\n            (change)="updateValue($event)">\n          <span [innerHTML]="checkboxItem?.name"></span>\n        </label>\n      </div>\n    </div>'}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var He=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e.decorators=[{type:n.Component,args:[{selector:"file-widget",template:""}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var Ge=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.autoCompleteList=[]}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e.decorators=[{type:n.Component,args:[{selector:"input-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <input *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [type]="layoutNode?.type">\n      <input *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (input)="updateValue($event)">\n        <datalist *ngIf="options?.typeahead?.source"\n          [id]="\'control\' + layoutNode?._id + \'Autocomplete\'">\n          <option *ngFor="let word of options?.typeahead?.source" [value]="word">\n        </datalist>\n    </div>'}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var Ue=function(){function e(e){this.jsf=e,this.message=null}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.message=this.options.help||this.options.helpvalue||this.options.msg||this.options.message},e.decorators=[{type:n.Component,args:[{selector:"message-widget",template:'\n    <span *ngIf="message"\n      [class]="options?.labelHtmlClass || \'\'"\n      [innerHTML]="message"></span>'}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var Ze=function(){function e(){}return e.decorators=[{type:n.Component,args:[{selector:"none-widget",template:""}]}],e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var Ke=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.allowNegative=!0,this.allowDecimal=!0,this.allowExponents=!1,this.lastValidNumber=""}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),"integer"===this.layoutNode.dataType&&(this.allowDecimal=!1)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e.decorators=[{type:n.Component,args:[{selector:"number-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <input *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.max]="options?.maximum"\n        [attr.min]="options?.minimum"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.step]="options?.multipleOf || options?.step || \'any\'"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [title]="lastValidNumber"\n        [type]="layoutNode?.type === \'range\' ? \'range\' : \'number\'">\n      <input *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.max]="options?.maximum"\n        [attr.min]="options?.minimum"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.step]="options?.multipleOf || options?.step || \'any\'"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [title]="lastValidNumber"\n        [type]="layoutNode?.type === \'range\' ? \'range\' : \'number\'"\n        [value]="controlValue"\n        (input)="updateValue($event)">\n      <span *ngIf="layoutNode?.type === \'range\'" [innerHTML]="controlValue"></span>\n    </div>'}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var Ye=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e.decorators=[{type:n.Component,args:[{selector:"one-of-widget",template:""}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var Qe=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.layoutOrientation="vertical",this.radiosList=[]}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},"radios-inline"!==this.layoutNode.type&&"radiobuttons"!==this.layoutNode.type||(this.layoutOrientation="horizontal"),this.radiosList=Me(this.options.titleMap||this.options.enumNames,this.options.enum,!0),this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e.decorators=[{type:n.Component,args:[{selector:"radios-widget",template:"\n    <label *ngIf=\"options?.title\"\n      [attr.for]=\"'control' + layoutNode?._id\"\n      [class]=\"options?.labelHtmlClass || ''\"\n      [style.display]=\"options?.notitle ? 'none' : ''\"\n      [innerHTML]=\"options?.title\"></label>\n\n    \x3c!-- 'horizontal' = radios-inline or radiobuttons --\x3e\n    <div *ngIf=\"layoutOrientation === 'horizontal'\"\n      [class]=\"options?.htmlClass || ''\">\n      <label *ngFor=\"let radioItem of radiosList\"\n        [attr.for]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n        [class]=\"(options?.itemLabelHtmlClass || '') +\n          ((controlValue + '' === radioItem?.value + '') ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\">\n        <input type=\"radio\"\n          [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n          [attr.readonly]=\"options?.readonly ? 'readonly' : null\"\n          [attr.required]=\"options?.required\"\n          [checked]=\"radioItem?.value === controlValue\"\n          [class]=\"options?.fieldHtmlClass || ''\"\n          [disabled]=\"controlDisabled\"\n          [id]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n          [name]=\"controlName\"\n          [value]=\"radioItem?.value\"\n          (change)=\"updateValue($event)\">\n        <span [innerHTML]=\"radioItem?.name\"></span>\n      </label>\n    </div>\n\n    \x3c!-- 'vertical' = regular radios --\x3e\n    <div *ngIf=\"layoutOrientation !== 'horizontal'\">\n      <div *ngFor=\"let radioItem of radiosList\"\n        [class]=\"options?.htmlClass || ''\">\n        <label\n          [attr.for]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n          [class]=\"(options?.itemLabelHtmlClass || '') +\n            ((controlValue + '' === radioItem?.value + '') ?\n            (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n            (' ' + (options?.style?.unselected || '')))\">\n          <input type=\"radio\"\n            [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n            [attr.readonly]=\"options?.readonly ? 'readonly' : null\"\n            [attr.required]=\"options?.required\"\n            [checked]=\"radioItem?.value === controlValue\"\n            [class]=\"options?.fieldHtmlClass || ''\"\n            [disabled]=\"controlDisabled\"\n            [id]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n            [name]=\"controlName\"\n            [value]=\"radioItem?.value\"\n            (change)=\"updateValue($event)\">\n          <span [innerHTML]=\"radioItem?.name\"></span>\n        </label>\n      </div>\n    </div>"}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var Xe=function(){function e(e){this.jsf=e,this.isFlexItem=!1}return e.prototype.isDraggable=function(e){return e.arrayItem&&"$ref"!==e.type&&"list"===e.arrayItemType&&!1!==this.isOrderable},e.prototype.getFlexAttribute=function(e,t){var r=["flex-grow","flex-shrink","flex-basis"].indexOf(t);return((e.options||{}).flex||"").split(/\s+/)[r]||(e.options||{})[t]||["1","1","auto"][r]},e.prototype.showWidget=function(e){return this.jsf.evaluateCondition(e,this.dataIndex)},e.decorators=[{type:n.Component,args:[{selector:"root-widget",template:'\n    <div *ngFor="let layoutItem of layout; let i = index"\n      [class.form-flex-item]="isFlexItem"\n      [style.align-self]="(layoutItem.options || {})[\'align-self\']"\n      [style.flex-basis]="getFlexAttribute(layoutItem, \'flex-basis\')"\n      [style.flex-grow]="getFlexAttribute(layoutItem, \'flex-grow\')"\n      [style.flex-shrink]="getFlexAttribute(layoutItem, \'flex-shrink\')"\n      [style.order]="(layoutItem.options || {}).order">\n      <div\n        [dataIndex]="layoutItem?.arrayItem ? (dataIndex || []).concat(i) : (dataIndex || [])"\n        [layoutIndex]="(layoutIndex || []).concat(i)"\n        [layoutNode]="layoutItem"\n        [orderable]="isDraggable(layoutItem)">\n        <select-framework-widget *ngIf="showWidget(layoutItem)"\n          [dataIndex]="layoutItem?.arrayItem ? (dataIndex || []).concat(i) : (dataIndex || [])"\n          [layoutIndex]="(layoutIndex || []).concat(i)"\n          [layoutNode]="layoutItem"></select-framework-widget>\n      </div>\n    </div>',styles:["\n    [draggable=true] {\n      transition: all 150ms cubic-bezier(.4, 0, .2, 1);\n    }\n    [draggable=true]:hover {\n      cursor: move;\n      box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\n      position: relative; z-index: 10;\n      margin-top: -1px;\n      margin-left: -1px;\n      margin-right: 1px;\n      margin-bottom: 1px;\n    }\n    [draggable=true].drag-target-top {\n      box-shadow: 0 -2px 0 #000;\n      position: relative; z-index: 20;\n    }\n    [draggable=true].drag-target-bottom {\n      box-shadow: 0 2px 0 #000;\n      position: relative; z-index: 20;\n    }\n  "]}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={dataIndex:[{type:n.Input}],layoutIndex:[{type:n.Input}],layout:[{type:n.Input}],isOrderable:[{type:n.Input}],isFlexItem:[{type:n.Input}]},e}();var et=function(){function e(e){this.jsf=e,this.expanded=!0}return Object.defineProperty(e.prototype,"sectionTitle",{get:function(){return this.options.notitle?null:this.jsf.setItemTitle(this)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){switch(this.jsf.initializeControl(this),this.options=this.layoutNode.options||{},this.expanded="boolean"==typeof this.options.expanded?this.options.expanded:!this.options.expandable,this.layoutNode.type){case"fieldset":case"array":case"tab":case"advancedfieldset":case"authfieldset":case"optionfieldset":case"selectfieldset":this.containerType="fieldset";break;default:this.containerType="div"}},e.prototype.toggleExpanded=function(){this.options.expandable&&(this.expanded=!this.expanded)},e.prototype.getFlexAttribute=function(e){var t="flex"===this.layoutNode.type||!!this.options.displayFlex||"flex"===this.options.display;if("flex"!==e&&!t)return null;switch(e){case"is-flex":return t;case"display":return t?"flex":"initial";case"flex-direction":case"flex-wrap":var r=["flex-direction","flex-wrap"].indexOf(e);return(this.options["flex-flow"]||"").split(/\s+/)[r]||this.options[e]||["column","nowrap"][r];case"justify-content":case"align-items":case"align-content":return this.options[e]}},e.decorators=[{type:n.Component,args:[{selector:"section-widget",template:'\n    <div *ngIf="containerType === \'div\'"\n      [class]="options?.htmlClass || \'\'"\n      [class.expandable]="options?.expandable && !expanded"\n      [class.expanded]="options?.expandable && expanded">\n      <label *ngIf="sectionTitle"\n        class="legend"\n        [class]="options?.labelHtmlClass || \'\'"\n        [innerHTML]="sectionTitle"\n        (click)="toggleExpanded()"></label>\n      <root-widget *ngIf="expanded"\n        [dataIndex]="dataIndex"\n        [layout]="layoutNode.items"\n        [layoutIndex]="layoutIndex"\n        [isFlexItem]="getFlexAttribute(\'is-flex\')"\n        [isOrderable]="options?.orderable"\n        [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n        [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n        [style.align-content]="getFlexAttribute(\'align-content\')"\n        [style.align-items]="getFlexAttribute(\'align-items\')"\n        [style.display]="getFlexAttribute(\'display\')"\n        [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n        [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n        [style.justify-content]="getFlexAttribute(\'justify-content\')"></root-widget>\n    </div>\n    <fieldset *ngIf="containerType === \'fieldset\'"\n      [class]="options?.htmlClass || \'\'"\n      [class.expandable]="options?.expandable && !expanded"\n      [class.expanded]="options?.expandable && expanded"\n      [disabled]="options?.readonly">\n      <legend *ngIf="sectionTitle"\n        class="legend"\n        [class]="options?.labelHtmlClass || \'\'"\n        [innerHTML]="sectionTitle"\n        (click)="toggleExpanded()"></legend>\n      <div *ngIf="options?.messageLocation !== \'bottom\'">\n        <p *ngIf="options?.description"\n        class="help-block"\n        [class]="options?.labelHelpBlockClass || \'\'"\n        [innerHTML]="options?.description"></p>\n      </div>\n      <root-widget *ngIf="expanded"\n        [dataIndex]="dataIndex"\n        [layout]="layoutNode.items"\n        [layoutIndex]="layoutIndex"\n        [isFlexItem]="getFlexAttribute(\'is-flex\')"\n        [isOrderable]="options?.orderable"\n        [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n        [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n        [style.align-content]="getFlexAttribute(\'align-content\')"\n        [style.align-items]="getFlexAttribute(\'align-items\')"\n        [style.display]="getFlexAttribute(\'display\')"\n        [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n        [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n        [style.justify-content]="getFlexAttribute(\'justify-content\')"></root-widget>\n      <div *ngIf="options?.messageLocation === \'bottom\'">\n        <p *ngIf="options?.description"\n        class="help-block"\n        [class]="options?.labelHelpBlockClass || \'\'"\n        [innerHTML]="options?.description"></p>\n      </div>\n    </fieldset>',styles:["\n    .legend { font-weight: bold; }\n    .expandable > legend:before, .expandable > label:before  { content: '▶'; padding-right: .3em; }\n    .expanded > legend:before, .expanded > label:before  { content: '▼'; padding-right: .2em; }\n  "]}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var tt=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1,this.selectList=[],this.isArray=M}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.selectList=Me(this.options.titleMap||this.options.enumNames,this.options.enum,!!this.options.required,!!this.options.flatList),this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e.decorators=[{type:n.Component,args:[{selector:"select-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <select *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName">\n        <ng-template ngFor let-selectItem [ngForOf]="selectList">\n          <option *ngIf="!isArray(selectItem?.items)"\n            [value]="selectItem?.value">\n            <span [innerHTML]="selectItem?.name"></span>\n          </option>\n          <optgroup *ngIf="isArray(selectItem?.items)"\n            [label]="selectItem?.group">\n            <option *ngFor="let subItem of selectItem.items"\n              [value]="subItem?.value">\n              <span [innerHTML]="subItem?.name"></span>\n            </option>\n          </optgroup>\n        </ng-template>\n      </select>\n      <select *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        (change)="updateValue($event)">\n        <ng-template ngFor let-selectItem [ngForOf]="selectList">\n          <option *ngIf="!isArray(selectItem?.items)"\n            [selected]="selectItem?.value === controlValue"\n            [value]="selectItem?.value">\n            <span [innerHTML]="selectItem?.name"></span>\n          </option>\n          <optgroup *ngIf="isArray(selectItem?.items)"\n            [label]="selectItem?.group">\n            <option *ngFor="let subItem of selectItem.items"\n              [attr.selected]="subItem?.value === controlValue"\n              [value]="subItem?.value">\n              <span [innerHTML]="subItem?.name"></span>\n            </option>\n          </optgroup>\n        </ng-template>\n      </select>\n    </div>'}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var rt=function(){function e(e,t){this.componentFactory=e,this.jsf=t,this.newComponent=null}return e.prototype.ngOnInit=function(){this.updateComponent()},e.prototype.ngOnChanges=function(){this.updateComponent()},e.prototype.updateComponent=function(){var e,t;if(this.widgetContainer&&!this.newComponent&&this.jsf.framework&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.jsf.framework))),this.newComponent)try{for(var r=h(["layoutNode","layoutIndex","dataIndex"]),n=r.next();!n.done;n=r.next()){var o=n.value;this.newComponent.instance[o]=this[o]}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.decorators=[{type:n.Component,args:[{selector:"select-framework-widget",template:"<div #widgetContainer></div>"}]}],e.ctorParameters=function(){return[{type:n.ComponentFactoryResolver},{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}],widgetContainer:[{type:n.ViewChild,args:["widgetContainer",{read:n.ViewContainerRef,static:!0}]}]},e}();var nt=function(){function e(e,t){this.componentFactory=e,this.jsf=t,this.newComponent=null}return e.prototype.ngOnInit=function(){this.updateComponent()},e.prototype.ngOnChanges=function(){this.updateComponent()},e.prototype.updateComponent=function(){var e,t;if(this.widgetContainer&&!this.newComponent&&(this.layoutNode||{}).widget&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.layoutNode.widget))),this.newComponent)try{for(var r=h(["layoutNode","layoutIndex","dataIndex"]),n=r.next();!n.done;n=r.next()){var o=n.value;this.newComponent.instance[o]=this[o]}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.decorators=[{type:n.Component,args:[{selector:"select-widget-widget",template:"<div #widgetContainer></div>"}]}],e.ctorParameters=function(){return[{type:n.ComponentFactoryResolver},{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}],widgetContainer:[{type:n.ViewChild,args:["widgetContainer",{read:n.ViewContainerRef,static:!0}]}]},e}();var ot=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){var e=this;this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),U(this.options,"disabled")?this.controlDisabled=this.options.disabled:this.jsf.formOptions.disableInvalidSubmit&&(this.controlDisabled=!this.jsf.isValid,this.jsf.isValidChanges.subscribe((function(t){return e.controlDisabled=!t}))),null!==this.controlValue&&void 0!==this.controlValue||(this.controlValue=this.options.title)},e.prototype.updateValue=function(e){"function"==typeof this.options.onClick?this.options.onClick(e):this.jsf.updateValue(this,e.target.value)},e.decorators=[{type:n.Component,args:[{selector:"submit-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <input\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (click)="updateValue($event)">\n    </div>'}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var it=function(){function e(e){this.jsf=e,this.selectedItem=0,this.showAddTab=!0}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.itemCount=this.layoutNode.items.length-1,this.updateControl()},e.prototype.select=function(e){"$ref"===this.layoutNode.items[e].type&&(this.itemCount=this.layoutNode.items.length,this.jsf.addItem({layoutNode:this.layoutNode.items[e],layoutIndex:this.layoutIndex.concat(e),dataIndex:this.dataIndex.concat(e)}),this.updateControl()),this.selectedItem=e},e.prototype.updateControl=function(){var e=this.layoutNode.items[this.layoutNode.items.length-1];"$ref"===e.type&&this.itemCount>=(e.options.maxItems||1e3)&&(this.showAddTab=!1)},e.prototype.setTabTitle=function(e,t){return this.jsf.setArrayItemTitle(this,e,t)},e.decorators=[{type:n.Component,args:[{selector:"tabs-widget",template:"\n    <ul\n      [class]=\"options?.labelHtmlClass || ''\">\n      <li *ngFor=\"let item of layoutNode?.items; let i = index\"\n        [class]=\"(options?.itemLabelHtmlClass || '') + (selectedItem === i ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + options?.style?.unselected))\"\n        role=\"presentation\"\n        data-tabs>\n        <a *ngIf=\"showAddTab || item.type !== '$ref'\"\n           [class]=\"'nav-link' + (selectedItem === i ? (' ' + options?.activeClass + ' ' + options?.style?.selected) :\n            (' ' + options?.style?.unselected))\"\n          [innerHTML]=\"setTabTitle(item, i)\"\n          (click)=\"select(i)\"></a>\n      </li>\n    </ul>\n\n    <div *ngFor=\"let layoutItem of layoutNode?.items; let i = index\"\n      [class]=\"options?.htmlClass || ''\">\n\n      <select-framework-widget *ngIf=\"selectedItem === i\"\n        [class]=\"(options?.fieldHtmlClass || '') +\n          ' ' + (options?.activeClass || '') +\n          ' ' + (options?.style?.selected || '')\"\n        [dataIndex]=\"layoutNode?.dataType === 'array' ? (dataIndex || []).concat(i) : dataIndex\"\n        [layoutIndex]=\"(layoutIndex || []).concat(i)\"\n        [layoutNode]=\"layoutItem\"></select-framework-widget>\n\n    </div>",styles:[" a { cursor: pointer; } "]}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var at=function(){function e(e,t){this.componentFactory=e,this.jsf=t,this.newComponent=null}return e.prototype.ngOnInit=function(){this.updateComponent()},e.prototype.ngOnChanges=function(){this.updateComponent()},e.prototype.updateComponent=function(){var e,t;if(this.widgetContainer&&!this.newComponent&&this.layoutNode.options.template&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.layoutNode.options.template))),this.newComponent)try{for(var r=h(["layoutNode","layoutIndex","dataIndex"]),n=r.next();!n.done;n=r.next()){var o=n.value;this.newComponent.instance[o]=this[o]}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},e.decorators=[{type:n.Component,args:[{selector:"template-widget",template:"<div #widgetContainer></div>"}]}],e.ctorParameters=function(){return[{type:n.ComponentFactoryResolver},{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}],widgetContainer:[{type:n.ViewChild,args:["widgetContainer",{read:n.ViewContainerRef,static:!0}]}]},e}();var st=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},e.prototype.updateValue=function(e){this.jsf.updateValue(this,e.target.value)},e.decorators=[{type:n.Component,args:[{selector:"textarea-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <textarea *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"></textarea>\n      <textarea *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [value]="controlValue"\n        (input)="updateValue($event)">{{controlValue}}</textarea>\n    </div>'}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var lt=function(){function e(){this.defaultWidget="text",this.widgetLibrary={none:Ze,root:Xe,"select-framework":rt,"select-widget":nt,$ref:We,email:"text",integer:"number",number:Ke,password:"text",search:"text",tel:"text",text:Ge,url:"text",color:"text",date:"text",datetime:"text","datetime-local":"text",month:"text",range:"number",time:"text",week:"text",checkbox:Je,file:He,hidden:"text",image:"text",radio:"radios",reset:"submit",submit:ot,button:_e,select:tt,textarea:st,checkboxes:Be,"checkboxes-inline":"checkboxes",checkboxbuttons:"checkboxes",radios:Qe,"radios-inline":"radios",radiobuttons:"radios",section:et,div:"section",fieldset:"section",flex:"section","one-of":Ye,array:"section",tabarray:"tabs",tab:"section",tabs:it,message:Ue,help:"message",msg:"message",html:"message",template:at,advancedfieldset:"section",authfieldset:"section",optionfieldset:"one-of",selectfieldset:"one-of",conditional:"section",actions:"section",tagsinput:"section",updown:"number","date-time":"datetime-local","alt-datetime":"datetime-local","alt-date":"date",wizard:"section",textline:"text"},this.registeredWidgets={},this.frameworkWidgets={},this.activeWidgets={},this.setActiveWidgets()}return e.prototype.setActiveWidgets=function(){var e,t;this.activeWidgets=Object.assign({},this.widgetLibrary,this.frameworkWidgets,this.registeredWidgets);try{for(var r=h(Object.keys(this.activeWidgets)),n=r.next();!n.done;n=r.next()){var o=n.value,i=this.activeWidgets[o];if("string"==typeof i){for(var a=[];"string"==typeof i&&!a.includes(i);)a.push(i),i=this.activeWidgets[i];"string"!=typeof i&&(this.activeWidgets[o]=i)}}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return!0},e.prototype.setDefaultWidget=function(e){return!!this.hasWidget(e)&&(this.defaultWidget=e,!0)},e.prototype.hasWidget=function(e,t){return void 0===t&&(t="activeWidgets"),!(!e||"string"!=typeof e)&&U(this[t],e)},e.prototype.hasDefaultWidget=function(e){return this.hasWidget(e,"widgetLibrary")},e.prototype.registerWidget=function(e,t){return!(!e||!t||"string"!=typeof e)&&(this.registeredWidgets[e]=t,this.setActiveWidgets())},e.prototype.unRegisterWidget=function(e){return!!U(this.registeredWidgets,e)&&(delete this.registeredWidgets[e],this.setActiveWidgets())},e.prototype.unRegisterAllWidgets=function(e){return void 0===e&&(e=!0),this.registeredWidgets={},e&&(this.frameworkWidgets={}),this.setActiveWidgets()},e.prototype.registerFrameworkWidgets=function(e){return null!==e&&"object"==typeof e||(e={}),this.frameworkWidgets=e,this.setActiveWidgets()},e.prototype.unRegisterFrameworkWidgets=function(){return!!Object.keys(this.frameworkWidgets).length&&(this.frameworkWidgets={},this.setActiveWidgets())},e.prototype.getWidget=function(e,t){return void 0===t&&(t="activeWidgets"),this.hasWidget(e,t)?this[t][e]:this.hasWidget(this.defaultWidget,t)?this[t][this.defaultWidget]:null},e.prototype.getAllWidgets=function(){return{widgetLibrary:this.widgetLibrary,registeredWidgets:this.registeredWidgets,frameworkWidgets:this.frameworkWidgets,activeWidgets:this.activeWidgets}},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var ut=function(){function e(e,t){var r=this;this.frameworks=e,this.widgetLibrary=t,this.activeFramework=null,this.loadExternalAssets=!1,this.frameworkLibrary={},this.frameworks.forEach((function(e){return r.frameworkLibrary[e.name]=e})),this.defaultFramework=this.frameworks[0].name,this.setFramework(this.defaultFramework)}return e.prototype.setLoadExternalAssets=function(e){void 0===e&&(e=!0),this.loadExternalAssets=!!e},e.prototype.setFramework=function(e,t){return void 0===e&&(e=this.defaultFramework),void 0===t&&(t=this.loadExternalAssets),this.activeFramework="string"==typeof e&&this.hasFramework(e)?this.frameworkLibrary[e]:"object"==typeof e&&U(e,"framework")?e:this.frameworkLibrary[this.defaultFramework],this.registerFrameworkWidgets(this.activeFramework)},e.prototype.registerFrameworkWidgets=function(e){return U(e,"widgets")?this.widgetLibrary.registerFrameworkWidgets(e.widgets):this.widgetLibrary.unRegisterFrameworkWidgets()},e.prototype.hasFramework=function(e){return U(this.frameworkLibrary,e)},e.prototype.getFramework=function(){return this.activeFramework||this.setFramework("default",!0),this.activeFramework.framework},e.prototype.getFrameworkWidgets=function(){return this.activeFramework.widgets||{}},e.prototype.getFrameworkStylesheets=function(e){return void 0===e&&(e=this.loadExternalAssets),e&&this.activeFramework.stylesheets||[]},e.prototype.getFrameworkScripts=function(e){return void 0===e&&(e=this.loadExternalAssets),e&&this.activeFramework.scripts||[]},e.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:Array,decorators:[{type:n.Inject,args:[ne]}]},{type:lt,decorators:[{type:n.Inject,args:[lt]}]}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(ne),n.ɵɵinject(lt))},token:e,providedIn:"root"}),e}();var pt=function(){function e(e,t,r,o){this.changeDetector=e,this.frameworkLibrary=t,this.widgetLibrary=r,this.jsf=o,this.formValueSubscription=null,this.formInitialized=!1,this.objectWrap=!1,this.previousInputs={schema:null,layout:null,data:null,options:null,framework:null,widgets:null,form:null,model:null,JSONSchema:null,UISchema:null,formData:null,loadExternalAssets:null,debug:null},this.onChanges=new n.EventEmitter,this.onSubmit=new n.EventEmitter,this.isValid=new n.EventEmitter,this.validationErrors=new n.EventEmitter,this.formSchema=new n.EventEmitter,this.formLayout=new n.EventEmitter,this.dataChange=new n.EventEmitter,this.modelChange=new n.EventEmitter,this.formDataChange=new n.EventEmitter,this.ngModelChange=new n.EventEmitter}return Object.defineProperty(e.prototype,"value",{get:function(){return this.objectWrap?this.jsf.data[1]:this.jsf.data},set:function(e){this.setFormValues(e,!1)},enumerable:!0,configurable:!0}),e.prototype.resetScriptsAndStyleSheets=function(){document.querySelectorAll(".ajsf").forEach((function(e){return e.remove()}))},e.prototype.loadScripts=function(){this.frameworkLibrary.getFrameworkScripts().map((function(e){var t=document.createElement("script");t.src=e,t.type="text/javascript",t.async=!0,t.setAttribute("class","ajsf"),document.getElementsByTagName("head")[0].appendChild(t)}))},e.prototype.loadStyleSheets=function(){this.frameworkLibrary.getFrameworkStylesheets().map((function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=e,t.setAttribute("class","ajsf"),document.getElementsByTagName("head")[0].appendChild(t)}))},e.prototype.loadAssets=function(){this.resetScriptsAndStyleSheets(),this.loadScripts(),this.loadStyleSheets()},e.prototype.ngOnInit=function(){this.updateForm(),this.loadAssets()},e.prototype.ngOnChanges=function(e){this.updateForm(),e.framework&&(e.framework.isFirstChange()||e.framework.previousValue===e.framework.currentValue||this.loadAssets())},e.prototype.writeValue=function(e){this.setFormValues(e,!1),this.formValuesInput||(this.formValuesInput="ngModel")},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.jsf.formOptions.formDisabled!==!!e&&(this.jsf.formOptions.formDisabled=!!e,this.initializeForm())},e.prototype.updateForm=function(){var e=this;if(!this.formInitialized||!this.formValuesInput||this.language&&this.language!==this.jsf.language)this.initializeForm();else{this.language&&this.language!==this.jsf.language&&this.jsf.setLanguage(this.language);var t=Object.keys(this.previousInputs).filter((function(t){return e.previousInputs[t]!==e[t]})),r=!0;if(1===t.length&&"form"===t[0]&&this.formValuesInput.startsWith("form.")&&(t=Object.keys(this.previousInputs.form||{}).filter((function(t){return!i(e.previousInputs.form[t],e.form[t])})).map((function(e){return"form."+e})),r=!1),1===t.length&&t[0]===this.formValuesInput)if(-1===this.formValuesInput.indexOf("."))this.setFormValues(this[this.formValuesInput],r);else{var n=y(this.formValuesInput.split("."),2),o=n[0],a=n[1];this.setFormValues(this[o][a],r)}else t.length&&(this.initializeForm(),this.onChange&&this.onChange(this.jsf.formValues),this.onTouched&&this.onTouched(this.jsf.formValues));Object.keys(this.previousInputs).filter((function(t){return e.previousInputs[t]!==e[t]})).forEach((function(t){return e.previousInputs[t]=e[t]}))}},e.prototype.setFormValues=function(e,t){if(void 0===t&&(t=!0),e){var r=this.objectWrap?e[1]:e;this.jsf.formGroup?t&&this.jsf.formGroup.reset():(this.jsf.formValues=e,this.activateForm()),this.jsf.formGroup&&this.jsf.formGroup.patchValue(r),this.onChange&&this.onChange(r),this.onTouched&&this.onTouched(r)}else this.jsf.formGroup.reset()},e.prototype.submitForm=function(){var e=this.jsf.validData;this.onSubmit.emit(this.objectWrap?e[1]:e)},e.prototype.initializeForm=function(){if(this.schema||this.layout||this.data||this.form||this.model||this.JSONSchema||this.UISchema||this.formData||this.ngModel||this.jsf.data){if(this.jsf.resetAllValues(),this.initializeOptions(),this.initializeSchema(),this.initializeLayout(),this.initializeData(),this.activateForm(),this.debug||this.jsf.formOptions.debug){this.debugOutput=[].map((function(e){return JSON.stringify(e,null,2)})).join("\n")}this.formInitialized=!0}},e.prototype.initializeOptions=function(){var e,t;this.language&&this.language!==this.jsf.language&&this.jsf.setLanguage(this.language),this.jsf.setOptions({debug:!!this.debug});var r=this.loadExternalAssets||!1,n=this.framework||"default";if(N(this.options)&&(this.jsf.setOptions(this.options),r=this.options.loadExternalAssets||r,n=this.options.framework||n),N(this.form)&&N(this.form.options)&&(this.jsf.setOptions(this.form.options),r=this.form.options.loadExternalAssets||r,n=this.form.options.framework||n),N(this.widgets)&&this.jsf.setOptions({widgets:this.widgets}),this.frameworkLibrary.setLoadExternalAssets(r),this.frameworkLibrary.setFramework(n),this.jsf.framework=this.frameworkLibrary.getFramework(),N(this.jsf.formOptions.widgets))try{for(var o=h(Object.keys(this.jsf.formOptions.widgets)),i=o.next();!i.done;i=o.next()){var a=i.value;this.widgetLibrary.registerWidget(a,this.jsf.formOptions.widgets[a])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}N(this.form)&&N(this.form.tpldata)&&this.jsf.setTpldata(this.form.tpldata)},e.prototype.initializeSchema=function(){N(this.schema)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.schema=o(this.schema)):U(this.form,"schema")&&N(this.form.schema)?this.jsf.schema=o(this.form.schema):N(this.JSONSchema)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.jsf.schema=o(this.JSONSchema)):U(this.form,"JSONSchema")&&N(this.form.JSONSchema)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.jsf.schema=o(this.form.JSONSchema)):U(this.form,"properties")&&N(this.form.properties)?this.jsf.schema=o(this.form):N(this.form),w(this.jsf.schema)||(_("object",this.jsf.schema.type)&&(this.jsf.schema.type="object"),U(this.jsf.schema,"type")&&"object"!==this.jsf.schema.type?(this.jsf.schema={type:"object",properties:{1:this.jsf.schema}},this.objectWrap=!0):U(this.jsf.schema,"type")||(N(this.jsf.schema.properties)||N(this.jsf.schema.patternProperties)||N(this.jsf.schema.additionalProperties)?this.jsf.schema.type="object":(this.jsf.JsonFormCompatibility=!0,this.jsf.schema={type:"object",properties:this.jsf.schema})),this.jsf.schema=g(this.jsf.schema),this.jsf.compileAjvSchema(),this.jsf.schema=ge(this.jsf.schema,this.jsf.schemaRefLibrary,this.jsf.schemaRecursiveRefMap,this.jsf.dataRecursiveRefMap,this.jsf.arrayMap),U(this.jsf.schemaRefLibrary,"")&&(this.jsf.hasRootReference=!0))},e.prototype.initializeData=function(){j(this.data)?(this.jsf.formValues=o(this.data),this.formValuesInput="data"):j(this.model)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.formValues=o(this.model),this.formValuesInput="model"):j(this.ngModel)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.formValues=o(this.ngModel),this.formValuesInput="ngModel"):N(this.form)&&j(this.form.value)?(this.jsf.JsonFormCompatibility=!0,this.jsf.formValues=o(this.form.value),this.formValuesInput="form.value"):N(this.form)&&j(this.form.data)?(this.jsf.formValues=o(this.form.data),this.formValuesInput="form.data"):j(this.formData)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.formValuesInput="formData"):U(this.form,"formData")&&j(this.form.formData)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.jsf.formValues=o(this.form.formData),this.formValuesInput="form.formData"):this.formValuesInput=null},e.prototype.initializeLayout=function(){var e=this,t=function(e){return(N(e)||M(e))&&H(e,(function(e,t){U(e,"options")&&N(e.options)&&(e.titleMap=e.options,delete e.options)}),"top-down"),e};M(this.layout)?this.jsf.layout=o(this.layout):M(this.form)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.layout=o(this.form)):this.form&&M(this.form.form)?(this.jsf.JsonFormCompatibility=!0,this.jsf.layout=t(o(this.form.form))):this.form&&M(this.form.layout)?this.jsf.layout=o(this.form.layout):this.jsf.layout=["*"];var r=null;N(this.UISchema)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,r=o(this.UISchema)):U(this.form,"UISchema")?(this.jsf.ReactJsonSchemaFormCompatibility=!0,r=o(this.form.UISchema)):U(this.form,"uiSchema")?(this.jsf.ReactJsonSchemaFormCompatibility=!0,r=o(this.form.uiSchema)):U(this.form,"customFormItems")&&(this.jsf.JsonFormCompatibility=!0,r=t(o(this.form.customFormItems))),r&&oe.forEachDeep(r,(function(t,r){var n=r.replace(/\//g,"/properties/").replace(/\/properties\/items\/properties\//g,"/items/properties/").replace(/\/properties\/titleMap\/properties\//g,"/titleMap/properties/");if(j(t)&&j(r)){var o=oe.toKey(r),i=(oe.parse(n)||[]).slice(0,-2),a=void 0;"ui:order"===o.toLowerCase()?a=v(i,["ui:order"]):("ui:"===o.slice(0,3).toLowerCase()&&(o=o.slice(3)),a=v(i,["x-schema-form",o])),oe.has(e.jsf.schema,i)&&!oe.has(e.jsf.schema,a)&&oe.set(e.jsf.schema,a,t)}}))},e.prototype.activateForm=function(){var e=this;if(w(this.jsf.schema)&&(w(this.jsf.formValues)||this.jsf.buildSchemaFromData()),w(this.jsf.schema)||(this.jsf.compileAjvSchema(),this.jsf.buildLayout(this.widgetLibrary),this.jsf.buildFormGroupTemplate(this.jsf.formValues),this.jsf.buildFormGroup()),this.jsf.formGroup){w(this.jsf.formValues)||!0===this.jsf.formOptions.setSchemaDefaults||!0===this.jsf.formOptions.setLayoutDefaults||this.setFormValues(this.jsf.formValues),this.jsf.dataChanges.subscribe((function(t){e.onChanges.emit(e.objectWrap?t[1]:t),e.formValuesInput&&-1===e.formValuesInput.indexOf(".")&&e[e.formValuesInput+"Change"].emit(e.objectWrap?t[1]:t)})),this.jsf.formGroup.statusChanges.subscribe((function(){return e.changeDetector.markForCheck()})),this.jsf.isValidChanges.subscribe((function(t){return e.isValid.emit(t)})),this.jsf.validationErrorChanges.subscribe((function(t){return e.validationErrors.emit(t)})),this.formSchema.emit(this.jsf.schema),this.formLayout.emit(this.jsf.layout),this.onChanges.emit(this.objectWrap?this.jsf.data[1]:this.jsf.data);var t=oe.get(this.jsf,"/formOptions/validateOnRender");if(t){var r=function(e){(!0===t||j(e.value))&&e.markAsTouched(),Object.keys(e.controls||{}).forEach((function(t){return r(e.controls[t])}))};r(this.jsf.formGroup),this.isValid.emit(this.jsf.isValid),this.validationErrors.emit(this.jsf.ajvErrors)}}},e.decorators=[{type:n.Component,args:[{selector:"json-schema-form",template:'<form [autocomplete]="jsf?.formOptions?.autocomplete ? \'on\' : \'off\'" class="json-schema-form" (ngSubmit)="submitForm()">\n  <root-widget [layout]="jsf?.layout"></root-widget>\n</form>\n<div *ngIf="debug || jsf?.formOptions?.debug">\n  Debug output:\n  <pre>{{debugOutput}}</pre>\n</div>',changeDetection:n.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:ut},{type:lt},{type:ze}]},e.propDecorators={schema:[{type:n.Input}],layout:[{type:n.Input}],data:[{type:n.Input}],options:[{type:n.Input}],framework:[{type:n.Input}],widgets:[{type:n.Input}],form:[{type:n.Input}],model:[{type:n.Input}],JSONSchema:[{type:n.Input}],UISchema:[{type:n.Input}],formData:[{type:n.Input}],ngModel:[{type:n.Input}],language:[{type:n.Input}],loadExternalAssets:[{type:n.Input}],debug:[{type:n.Input}],value:[{type:n.Input}],onChanges:[{type:n.Output}],onSubmit:[{type:n.Output}],isValid:[{type:n.Output}],validationErrors:[{type:n.Output}],formSchema:[{type:n.Output}],formLayout:[{type:n.Output}],dataChange:[{type:n.Output}],modelChange:[{type:n.Output}],formDataChange:[{type:n.Output}],ngModelChange:[{type:n.Output}]},e}();var dt=function(){function e(){}return e.decorators=[{type:n.Component,args:[{selector:"no-framework",template:'<select-widget-widget [dataIndex]="dataIndex" [layoutIndex]="layoutIndex" [layoutNode]="layoutNode">\n</select-widget-widget>'}]}],e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var ct=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="no-framework",t.framework=dt,t}return function(e,t){function r(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.decorators=[{type:n.Injectable}],t}(ne);var mt=function(){function e(e){this.jsf=e,this.controlDisabled=!1,this.boundControl=!1}return e.prototype.ngOnInit=function(){this.jsf.initializeControl(this)},e.decorators=[{type:n.Component,args:[{selector:"hidden-widget",template:'\n    <input *ngIf="boundControl"\n      [formControl]="formControl"\n      [id]="\'control\' + layoutNode?._id"\n      [name]="controlName"\n      type="hidden">\n    <input *ngIf="!boundControl"\n      [disabled]="controlDisabled"\n      [name]="controlName"\n      [id]="\'control\' + layoutNode?._id"\n      type="hidden"\n      [value]="controlValue">'}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var ft=function(){function e(e){this.jsf=e}return e.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{}},e.decorators=[{type:n.Component,args:[{selector:"tab-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <root-widget\n        [dataIndex]="dataIndex"\n        [layoutIndex]="layoutIndex"\n        [layout]="layoutNode.items"></root-widget>\n    </div>'}]}],e.ctorParameters=function(){return[{type:ze}]},e.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var ht=function(){function e(e,t,r){this.elementRef=e,this.jsf=t,this.ngZone=r,this.overParentElement=!1,this.overChildElement=!1}return e.prototype.ngOnInit=function(){var e=this;this.orderable&&this.layoutNode&&this.layoutIndex&&this.dataIndex&&(this.element=this.elementRef.nativeElement,this.element.draggable=!0,this.arrayLayoutIndex="move:"+this.layoutIndex.slice(0,-1).toString(),this.ngZone.runOutsideAngular((function(){e.element.addEventListener("dragstart",(function(t){t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text","");var r=e.dataIndex[e.dataIndex.length-1];sessionStorage.setItem(e.arrayLayoutIndex,r+"")})),e.element.addEventListener("dragover",(function(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move",!1})),e.element.addEventListener("dragenter",(function(t){if(e.overParentElement)return e.overChildElement=!0;e.overParentElement=!0;var r=sessionStorage.getItem(e.arrayLayoutIndex);null!==r&&(e.dataIndex[e.dataIndex.length-1]<+r?e.element.classList.add("drag-target-top"):e.dataIndex[e.dataIndex.length-1]>+r&&e.element.classList.add("drag-target-bottom"))})),e.element.addEventListener("dragleave",(function(t){e.overChildElement?e.overChildElement=!1:e.overParentElement&&(e.overParentElement=!1);var r=sessionStorage.getItem(e.arrayLayoutIndex);e.overParentElement||e.overChildElement||null===r||(e.element.classList.remove("drag-target-top"),e.element.classList.remove("drag-target-bottom"))})),e.element.addEventListener("drop",(function(t){e.element.classList.remove("drag-target-top"),e.element.classList.remove("drag-target-bottom");var r=sessionStorage.getItem(e.arrayLayoutIndex),n=e.dataIndex[e.dataIndex.length-1];return null!==r&&+r!==n&&e.jsf.moveArrayItem(e,+r,n),sessionStorage.removeItem(e.arrayLayoutIndex),!1}))})))},e.decorators=[{type:n.Directive,args:[{selector:"[orderable]"}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:ze},{type:n.NgZone}]},e.propDecorators={orderable:[{type:n.Input}],layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},e}();var yt=[We,Ye,_e,Je,Be,He,mt,Ge,Ue,Ze,Ke,Qe,Xe,et,tt,rt,nt,ot,ft,it,at,st],vt=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,r.FormsModule,r.ReactiveFormsModule],declarations:v(yt,[ht]),exports:v(yt,[ht]),entryComponents:v(yt)}]}],e}(),gt=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,vt],declarations:[dt],exports:[dt],providers:[{provide:ne,useClass:ct,multi:!0}],entryComponents:[dt]}]}],e}(),bt=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,r.FormsModule,r.ReactiveFormsModule,vt,gt],declarations:[pt],exports:[pt,vt]}]}],e}();e.AddReferenceComponent=We,e.BASIC_WIDGETS=yt,e.ButtonComponent=_e,e.CheckboxComponent=Je,e.CheckboxesComponent=Be,e.FileComponent=He,e.Framework=ne,e.FrameworkLibraryService=ut,e.HiddenComponent=mt,e.InputComponent=Ge,e.JsonPointer=oe,e.JsonSchemaFormComponent=pt,e.JsonSchemaFormModule=bt,e.JsonSchemaFormService=ze,e.JsonValidators=ae,e.MessageComponent=Ue,e.NoneComponent=Ze,e.NumberComponent=Ke,e.OneOfComponent=Ye,e.OrderableDirective=ht,e.RadiosComponent=Qe,e.RootComponent=Xe,e.SectionComponent=et,e.SelectComponent=tt,e.SelectFrameworkComponent=rt,e.SelectWidgetComponent=nt,e.SubmitComponent=ot,e.TabComponent=ft,e.TabsComponent=it,e.TemplateComponent=at,e.TextareaComponent=st,e.WidgetLibraryModule=vt,e.WidgetLibraryService=lt,e._executeAsyncValidators=x,e._executeValidators=b,e._mergeErrors=F,e._mergeObjects=I,e._toPromise=function(e){return $(e)?e:e.toPromise()},e.addClasses=function(e,t){var r=function(e){return!L(e)&&!M(e)&&!O(e)};if(r(t))return e;r(e)&&(e="");var n=function(e){return L(e)?e:M(e)?new Set(e):new Set(e.split(" "))},o=n(e);return n(t).forEach((function(e){return o.add(e)})),L(e)?o:M(e)?Array.from(o):Array.from(o).join(" ")},e.buildFormGroup=Ce,e.buildFormGroupTemplate=Fe,e.buildLayout=De,e.buildLayoutFromSchema=Pe,e.buildSchemaFromData=ue,e.buildSchemaFromLayout=le,e.buildTitleMap=Me,e.checkInlineType=me,e.combineAllOf=xe,e.commonItems=ee,e.convertSchemaToDraft6=g,e.copy=B,e.dateToString=function(e,t){void 0===t&&(t={});var r=t.dateFormat||"YYYY-MM-DD";if(!(e=new Date(e||void 0)).getDate())return null;var n=e.getFullYear().toString(),o=e.getMonth(),i=e.getDate(),a=e.getDay();return r.replace(/S/g,function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(i)).replace(/YYYY/g,n).replace(/YY/g,n.slice(-2)).replace(/MMMM/g,Se[o]).replace(/MMM/g,Le[o]).replace(/MM/g,("0"+(o+1)).slice(-2)).replace(/M/g,o+1).replace(/DDDD/g,Ve[a]).replace(/DDD/g,Ee[a]).replace(/DD/g,("0"+i).slice(-2)).replace(/D/g,i)},e.enValidationMessages=Ae,e.fixRequiredArrayProperties=Ie,e.fixTitle=te,e.forEach=H,e.forEachCopy=G,e.formatFormData=we,e.frValidationMessages=Te,e.getControl=Oe,e.getControlValidators=ve,e.getFromSchema=pe,e.getInputType=ce,e.getLayoutNode=Ne,e.getSubSchema=be,e.getTitleMapFromOneOf=ye,e.getType=E,e.hasOwn=U,e.hasValue=j,e.inArray=_,e.isArray=M,e.isBoolean=k,e.isDate=S,e.isDefined=C,e.isEmpty=w,e.isFunction=function(e){return"function"==typeof e},e.isInputRequired=fe,e.isInteger=P,e.isMap=V,e.isNumber=D,e.isObject=N,e.isObservable=z,e.isPrimitive=T,e.isPromise=$,e.isSet=L,e.isString=O,e.isType=A,e.itValidationMessages=qe,e.mapLayout=ke,e.mergeFilteredObject=Q,e.mergeSchemas=se,e.ptValidationMessages=Re,e.removeRecursiveReferences=de,e.resolveSchemaReferences=ge,e.setRequiredFields=je,e.toJavaScriptType=q,e.toObservable=W,e.toSchemaType=R,e.toTitleCase=re,e.uniqueItems=X,e.updateInputOptions=he,e.xor=J,e.zhValidationMessages=$e,e.ɵa=yt,e.ɵb=We,e.ɵba=dt,e.ɵbb=ct,e.ɵc=Ye,e.ɵd=_e,e.ɵe=Je,e.ɵf=Be,e.ɵg=He,e.ɵh=mt,e.ɵi=Ge,e.ɵj=Ue,e.ɵk=Ze,e.ɵl=Ke,e.ɵm=ht,e.ɵn=Qe,e.ɵo=Xe,e.ɵp=et,e.ɵq=tt,e.ɵr=rt,e.ɵs=nt,e.ɵt=ot,e.ɵu=ft,e.ɵv=it,e.ɵw=at,e.ɵx=st,e.ɵy=lt,e.ɵz=gt,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ajsf-core.umd.min.js.map